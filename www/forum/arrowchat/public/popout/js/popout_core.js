!function(a){a.arrowchat=function(){var o=a("body"),r=null,t={},e={},s={},i={};function h(){r&&r.hide()}function n(t,e,s,i,h,n,l){null===r&&(r=a('<div id="arrowchat_tooltip"><div class="arrowchat_tooltip_content"></div></div>').appendTo(o),an=a(".arrowchat_tooltip_content",r)),an.html(e);var p=t.offset(),w=t.width(),m=t.height(),u=r.width();i||(i=0),h||(h=0),s?r.css({top:p.top-a(window).scrollTop()-m-5-h,left:p.left+w-16-i,display:"block","padding-right":"0px","padding-left":"0px"}).addClass("arrowchat_tooltip_left"):l?r.css({top:p.top-a(window).scrollTop()+m/2-10-h,left:p.left+w+28-i,display:"block","padding-right":"0px","padding-left":"6px"}).removeClass("arrowchat_tooltip_left"):n?r.css({top:p.top-a(window).scrollTop()+m/2-10-h,left:p.left+w-u+18-i,display:"block","background-position":u-128+"px -58px","padding-right":"6px","padding-left":"0px"}).removeClass("arrowchat_tooltip_left"):r.css({top:p.top-a(window).scrollTop()-m-5-h,left:p.left+w-u+18-i,display:"block","padding-right":"0px","padding-left":"0px"}).removeClass("arrowchat_tooltip_left"),a4&&(r.css("position","absolute"),r.css("top",parseInt(a(window).height())-parseInt(r.css("bottom"))-parseInt(r.height())+a(window).scrollTop()+"px"))}function l(){if(clearTimeout(aw),a(".arrowchat_nofriends").remove(),a.ajax({url:c_ac_path+"includes/json/receive/receive_buddylist.php?popout=1",cache:!1,type:"get",dataType:"json",success:function(o){var r,s,i;a("#arrowchat_room_selection").hasClass("arrowchat_selection_tab_selected")||(r=o,a(".arrowchat_loading_icon").remove(),a("#arrowchat_popout_left_lists").html('<div id="arrowchat_userslist_available"></div><div id="arrowchat_userslist_busy"></div><div id="arrowchat_userslist_away"></div><div id="arrowchat_userslist_offline"></div>'),s={},i="",s.available="",s.busy="",s.offline="",s.away="",onlineNumber=buddylistreceived=0,r&&a.each(r,function(o,r){if("buddylist"==o&&(buddylistreceived=1,totalFriendsNumber=onlineNumber=0,a.each(r,function(o,r){longname=at(r.n),null!=aq[r.id]&&(a(".arrowchat_closed_status",t[r.id]).removeClass("arrowchat_available").removeClass("arrowchat_busy").removeClass("arrowchat_offline").removeClass("arrowchat_away").addClass("arrowchat_"+r.s),"offline"==r.s||"busy"==r.s&&2!=c_video_select&&3!=c_video_select?a(".arrowchat_popout_video_chat",e[r.id]).addClass("arrowchat_video_unavailable"):a(".arrowchat_popout_video_chat",e[r.id]).removeClass("arrowchat_video_unavailable")),("available"==r.s||"away"==r.s||"busy"==r.s)&&onlineNumber++,totalFriendsNumber++,a("#arrowchat_setting_names_only :input").is(":checked")&&(i="arrowchat_hide_avatars");var h=" fas fa-circle";if("away"==r.s?h=" fas fa-moon":"busy"==r.s&&(h=" far fa-mobile-screen"),s[r.s]+='<div id="arrowchat_userlist_'+r.id+'" class="arrowchat_userlist arrowchat_buddylist_admin_'+r.admin+'" onmouseover="jqac(this).addClass(\'arrowchat_userlist_hover\');" onmouseout="jqac(this).removeClass(\'arrowchat_userlist_hover\');"><img class="arrowchat_userlist_avatar '+i+'" src="'+r.a+'" /><span class="arrowchat_userscontentname">'+longname+'</span><span class="arrowchat_userscontentdot arrowchat_'+r.s+h+'"></span></div>',void 0!==e[r.id]){var n=r.s;"available"==n&&(n=lang[1]),"away"==n&&(n=lang[240]),"offline"==n&&(n=lang[241]),"busy"==n&&(n=lang[216]),e[r.id].find(".arrowchat_right_header_status").html(n),a(".arrowchat_info_status",e[r.id]).html(n)}uc_status[r.id]=r.s,uc_name[r.id]=r.n,uc_avatar[r.id]=r.a,uc_link[r.id]=r.l})),1==buddylistreceived){for(buddystatus in s)s.hasOwnProperty(buddystatus)&&(""==s[buddystatus]?a("#arrowchat_userslist_"+buddystatus).html(""):a("#arrowchat_userslist_"+buddystatus).html("<div>"+s[buddystatus]+"</div>"));a(".arrowchat_userlist").click(function(){var o=a(this).attr("id").substr(19);x(o,uc_name[o],uc_status[o],uc_avatar[o],uc_link[o])}),aH=onlineNumber,(0==totalFriendsNumber||0==onlineNumber)&&a('<div class="arrowchat_nofriends">'+lang[8]+"</div>").appendTo("#arrowchat_popout_friends"),buddylistreceived=0}(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1)}),a(".arrowchat_buddylist_admin_1").css("background-color","#"+c_admin_bg),a(".arrowchat_buddylist_admin_1").css("color","#"+c_admin_txt))}}),"undefined"!=typeof c_list_heart_beat)var o=1e3*c_list_heart_beat;else var o=6e4;aw=setTimeout(function(){l()},o)}function p(a){return anchorme.js(a)}function w(a){var o=a.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([^\s]+)$/mi);return o&&11==o[1].length&&(a='<span style="width:160px;margin-bottom:5px;display:block">'+o[0]+'</span><div style="margin-bottom:5px"></div><iframe style="width:160px;height:140px" src="https://www.youtube.com/embed/'+o[1]+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>'),a}function m(a){if(1!=c_disable_smilies){a=a.replace(/^(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*$/g,function(a,o,r,t){return'<span class="arrowchat_emoji_text arrowchat_emoji_32">'+a+"</span>"});for(var o=0;o<Smiley.length;o++){var r=Smiley[o][1].replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=a.lastIndexOf(r);-1!=t&&(a=a.replace(RegExp(RegExp.escape(r),"g"),'<span class="arrowchat_emoji_text"><img src="'+c_ac_path+"includes/emojis/img/16/"+Smiley[o][0]+'" alt="" /> </span>'))}for(var o=0;o<aR.length;o++){var r=aR[o][0].replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=a.lastIndexOf(r);-1!=t&&(a=a==r?a.replace(RegExp(RegExp.escape(r),"g"),aR[o][1]):a.replace(RegExp(RegExp.escape(" "+r),"g")," "+aR[o][1]))}}return a}function u(){var a="",o=0;for(chatbox in aN)aN.hasOwnProperty(chatbox)&&null!=aN[chatbox]&&(a+=chatbox+"|"+aN[chatbox]+",",aN[chatbox]>0&&(o=1));aO=o,a.slice(0,-1)}function v(){a(".arrowchat_popout_convo").css("height",a(window).height()-a(".arrowchat_popout_convo_focused .arrowchat_popout_convo_right_header").outerHeight()-a("#arrowchat_popout_open_chats").outerHeight()-a(".arrowchat_popout_convo_focused .arrowchat_popout_input_container").outerHeight())}function g(){"undefined"!=typeof CHA&&clearTimeout(CHA),"undefined"!=typeof xOptions&&xOptions.abort()}function b(){g();var o="";if(!a.isEmptyObject(aj))for(var r in aj)o=o+"&room[]="+aj[r];var t=c_ac_path+"includes/json/receive/receive_core.php?hash="+u_hash_id+"&init="+aG+o;if(xOptions=a.ajax({url:t,dataType:"jsonp",success:function(o){a$.timestamp=aF;var r={};r.available="",r.busy="",r.offline="",r.away="",onlineNumber=buddylistreceived=0,o&&null!=o&&a.each(o,function(o,t){if("popout"==o&&window.close(),"typing"==o&&a.each(t,function(a,o){"1"==o.is_typing?(a8(o.typing_id,"typing"),J(o.typing_id)):(a8(o.typing_id,"untyping"),Q(o.typing_id))}),"announcements"==o&&a.each(t,function(a,o){ao(o)}),"warnings"==o&&a.each(t,function(a,o){R(o)}),"chatroom"==o){var s=[],i=[],h=0;if(a.each(t,function(o,r){1==r.action?a("#arrowchat_chatroom_message_"+r.m+" .arrowchat_chatboxmessagecontent").html(lang[159]+r.n):(void 0===blockList[r.userid]&&Z(r.id,r.n,r.m,r.userid,r.t,r.global,r.mod,r.admin,r.chatroomid),a(".arrowchat_textarea").is(":focus")||r.userid==u_id||(h=1),i[r.chatroomid]=r,void 0!==s[r.chatroomid]?s[r.chatroomid]=s[r.chatroomid]+1:s[r.chatroomid]=1)}),i.length>0){for(var n in z(),i)void 0===blockList[i[n].userid]&&(X(s[n],i[n].chatroomid),a8(JSON.stringify([s[n],i[n].chatroomid]),"chatroom_alerts"));1==u_chatroom_sound&&1==h&&$()}}if("messages"==o){var l=0;a.each(t,function(o,r){B(r.id,r.from,r.message,r.sent,r.self,r.old,0,0),a(".arrowchat_textarea",e[r.from]).is(":focus")||(l=1)}),a5=1,a7=aE,_(),1!=r&&1==u_sounds&&1==l&&1!=aG&&$()}}),1!=a3&&1!=aT&&(++a5>4&&(a7*=2,a5=1),a7>12e3&&(a7=12e3)),aG++}}),1==a2)var s=3e3*c_heart_beat;else var s=1e3*c_heart_beat;1!=c_push_engine&&(CHA=setTimeout(function(){b()},s))}function _(){a(".arrowchat_chatboxmessagecontent").mouseenter(function(){a(this).parent().parent().hasClass("arrowchat_image_msg")?n(a(this),a(this).attr("data-id"),!1,a(this).parent().width()+23,6,1,!1):n(a(this),a(this).attr("data-id"),!1,a(this).parent().width()-5,-3,1,!1)}),a(".arrowchat_chatboxmessagecontent").mouseleave(function(){h()}),a(".arrowchat_chatboxmessage").mouseenter(function(){a(this).children(".arrowchat_ts").show()}),a(".arrowchat_chatboxmessage").mouseleave(function(){a(this).children(".arrowchat_ts").hide()}),a(".arrowchat_lightbox").unbind("click"),a(".arrowchat_lightbox").click(function(){a.slimbox(a(this).attr("data-id"),'<a href="'+a(this).attr("data-id")+'">'+lang[70]+"</a>",{resizeDuration:1,overlayFadeDuration:1,imageFadeDuration:1,captionAnimationDuration:1})})}function y(o,r){null==uc_name[o]||""==uc_name[o]?setTimeout(function(){y(o,r)},500):(a("#arrowchat_popout_text_"+o).append("<div>"+r+"</div>"),a("#arrowchat_popout_text_"+o).scrollTop(5e4),aq[o]=1)}function $(){ion.sound.play("new_message")}function x(o,r,e,s,i,h,n){null==o||""==o||(null==uc_name[o]||""==uc_name[o]?1!=aD[o]?(aD[o]=1,a.ajax({url:c_ac_path+"includes/json/receive/receive_user.php",data:{userid:o},type:"post",cache:!1,dataType:"json",success:function(l){l&&(r=uc_name[o]=l.n,e=uc_status[o]=l.s,s=uc_avatar[o]=l.a,i=uc_link[o]=l.l,null!=aq[o]&&a(".arrowchat_closed_status",t[o]).removeClass("arrowchat_available").removeClass("arrowchat_busy").removeClass("arrowchat_offline").addClass("arrowchat_"+e),aD[o]=0,null!=r?O(o,r,e,s,i,h,n):a.post(c_ac_path+"includes/json/send/send_settings.php",{unfocus_chat:o},function(){}))}})):setTimeout(function(){x(o,uc_name[o],uc_status[o],uc_avatar[o],uc_link[o],h,n)},500):O(o,uc_name[o],uc_status[o],uc_avatar[o],uc_link[o],h,n))}function k(a,o){var r="am",t=a.getHours(),e=a.getMinutes(),s=a.getDate();a=a.getMonth();var i=t;t>11&&(r="pm"),t>12&&(t-=12),0==t&&(t=12),e<10&&(e="0"+e);var h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n="th";return(1==s||21==s||31==s?n="st":2==s||22==s?n="nd":(3==s||23==s)&&(n="rd"),o)?1!=c_us_time?s!=aY?""+i+":"+e+" "+s+n+" "+h[a]:""+i+":"+e:s!=aY?""+h[a]+" "+s+", "+t+":"+e+r:""+t+":"+e+r:1!=c_us_time?s!=aY?'<span class="arrowchat_ts">'+i+":"+e+" "+s+n+" "+h[a]+"</span>":'<span class="arrowchat_ts">'+i+":"+e+"</span>":s!=aY?'<span class="arrowchat_ts">'+h[a]+" "+s+", "+t+":"+e+r+"</span>":'<span class="arrowchat_ts">'+t+":"+e+r+"</span>"}function C(a){let o=a.slice(0,2).toLowerCase(),r=o.charCodeAt(0),t=r.toString()+r.toString()+r.toString();var e=Math.round(16777215*parseInt(t));return{color:"rgb("+(e>>16&255)+", "+(e>>8&255)+", "+(255&e)+", 0.7)",character:o.toUpperCase()}}function T(o,r,t){a(".arrowchat_pending_msg_room_"+r).length>0&&(a(".arrowchat_pending_msg_room_"+r+" .arrowchat_pending_icon").addClass(t),a.isNumeric(o)&&0!=o&&a(".arrowchat_pending_msg_room_"+r).attr("id","arrowchat_chatroom_message_"+o))}function E(o,r){var t=o.val();if(t=t.replace(/^\s+|\s+$/g,""),o.val(""),o.focus(),1==c_send_room_msg&&""!=t)Y("arrowchat_chatroom_message_flyout",lang[209],"error");else{var e=0;""!=t&&a.ajax({url:c_ac_path+"includes/json/send/send_message_chatroom.php",type:"post",cache:!1,dataType:"json",data:{userid:u_id,username:u_name,chatroomid:r,message:t},beforeSend:function(){U(0,u_name,t,0,r,e=++a1)},error:function(){Y("arrowchat_chatroom_message_flyout",lang[135],"error"),T(0,e,"arrowchat_pending_error")},success:function(o){if(o){var s=!0;a.isNumeric(o)&&(s=!1);var h=!0;if(s&&o&&a.each(o,function(r,t){"error"==r&&a.each(t,function(a,r){h=!1,Y("arrowchat_chatroom_message_flyout",r.m,"error"),T(o,e,"arrowchat_pending_error")})}),h){T(o,e,"arrowchat_pending_delivered");var n=[o,u_name,t,r];a8(JSON.stringify(n),"send_chatroom_message"),a(".arrowchat_popout_convo",i[r]).scrollTop(a(".arrowchat_popout_convo",i[r])[0].scrollHeight)}}}})}return!1}function F(o,r,t){a(".arrowchat_pending_msg_"+r).length>0&&(a(".arrowchat_pending_msg_"+r+" .arrowchat_pending_icon").addClass(t),a.isNumeric(o)&&0!=o&&a(".arrowchat_pending_msg_"+r).attr("id","arrowchat_message_"+o))}function H(o,r){var t=o.val();if(t=t.replace(/^\s+|\s+$/g,""),o.val(""),o.focus(),1==c_send_priv_msg&&""!=t)Y("arrowchat_chatroom_message_flyout",lang[209],"error");else{var e=0,s=Math.floor((new Date).getTime()/1e3);""!=t&&a.ajax({url:c_ac_path+"includes/json/send/send_message.php",type:"post",cache:!1,dataType:"json",data:{userid:u_id,to:r,message:t},beforeSend:function(){e=++a0,clearTimeout(aQ),aB=-1,B(0,r,t,s,1,0,1,e)},error:function(){Y("arrowchat_chatroom_message_flyout",lang[135],"error"),F(0,e,"arrowchat_pending_error")},success:function(o){if(o){if(a.isNumeric(o)){aM[r]=o,F(o,e,"arrowchat_pending_delivered");var i=[o,r,t,s,1,1];a8(JSON.stringify(i),"private_message")}else a.each(o,function(r,t){"error"==r&&a.each(t,function(a,r){Y("arrowchat_chatroom_message_flyout",r.m,"error"),F(o,e,"arrowchat_pending_error")})})}a5=1}})}}function O(o,r,s,i,p,w){if(void 0!==t[o])t[o].hasClass("arrowchat_tabclick")||1==w||t[o].click();else{var m=at(uc_name[o]),g=C(m);t[o]=a("<div/>").attr("data-id",o).addClass("arrowchat_popout_tab").html('<div class="arrowchat_bar_left"><div class="arrowchat_popout_wrap"><div class="arrowchat_avatartab arrowchat_white_background"><img class="arrowchat_avatar_tab" src="'+uc_avatar[o]+'" /><span class="arrowchat_tab_letter arrowchat_tab_letter_small arrowchat_tab_letter_xxsmall"></span></div><div class="arrowchat_closed_status arrowchat_'+s+'"></div><div class="arrowchat_popout_tab_name">'+m+'</div><div class="arrowchat_is_typing"><div class="arrowchat_typing_bubble"></div><div class="arrowchat_typing_bubble"></div><div class="arrowchat_typing_bubble"></div></div></div></div><div class="arrowchat_popout_right"><div class="arrowchat_closebox_bottom"><i class="fas fa-xmark"></i></div></div>').appendTo(a("#arrowchat_popout_container"));var b=uc_status[o];"available"==b&&(b=lang[1]),"away"==b&&(b=lang[240]),"offline"==b&&(b=lang[241]),"busy"==b&&(b=lang[216]),e[o]=a("<div/>").attr("data-id",o).addClass("arrowchat_popout_convo_wrapper").html('<div class="arrowchat_popout_convo_right_header"><div class="arrowchat_user_image"><div class="arrowchat_avatarbox arrowchat_white_background"><img class="arrowchat_avatar" src="'+uc_avatar[o]+'" /><span class="arrowchat_tab_letter arrowchat_tab_letter_small"></span></div></div><div class="arrowchat_header_container"><div class="arrowchat_right_header_name"><a target="_blank" href="'+uc_link[o]+'">'+uc_name[o]+'</a></div><div class="arrowchat_right_header_status">'+b+'</div></div><div class="arrowchat_popout_video_chat fas fa-video" id="arrowchat_video_chat_'+o+'"></div><div class="arrowchat_popout_info far fa-ellipsis" id="arrowchat_info_'+o+'"></div></div><div id="arrowchat_popout_text_'+o+'" class="arrowchat_popout_convo"></div><div class="arrowchat_popout_input_container"><div class="arrowchat_giphy_button"><i class="fas fa-gif"></i><div class="arrowchat_more_wrapper arrowchat_giphy_popout"><div class="arrowchat_more_popout"><div class="arrowchat_giphy_box"><label class="arrowchat_giphy_search_wrapper"><div class="arrowchat_giphy_magnify"><i class="far fa-magnifying-glass"></i></div><input type="text" class="arrowchat_giphy_search" placeholder="'+lang[214]+'" value="" tabindex="0" /></label><div class="arrowchat_giphy_image_wrapper"><div class="arrowchat_loading_icon"></div></div></div><i class="arrowchat_more_tip"></i></div></div></div><div id="arrowchat_upload_button_'+o+'" class="arrowchat_upload_button_container"><i class="fas fa-camera"></i><div id="arrowchat_chatroom_uploader"> </div></div><div class="arrowchat_textarea_wrapper"><textarea class="arrowchat_textarea" placeholder="'+lang[213]+'"></textarea><div class="arrowchat_smiley_button"><i class="fa-solid fa-face-grin-wide"></i><div class="arrowchat_more_wrapper arrowchat_smiley_popout"><div class="arrowchat_more_popout"><div class="arrowchat_smiley_box"><div class="arrowchat_emoji_wrapper"></div><div class="arrowchat_emoji_select_wrapper"><div class="arrowchat_emoji_selector arrowchat_emoji_smileys" data-id="emoji_smileys"><i class="fa-solid fa-face-grin-beam"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_animals" data-id="emoji_animals"><i class="fa-solid fa-dog"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_food" data-id="emoji_food"><i class="fa-solid fa-fork-knife"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_activities" data-id="emoji_activities"><i class="fa-solid fa-basketball"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_travel" data-id="emoji_travel"><i class="fa-solid fa-plane"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_objects" data-id="emoji_objects"><i class="fa-solid fa-bath"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_symbols" data-id="emoji_symbols"><i class="fa-solid fa-symbols"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_flags" data-id="emoji_flags"><i class="fa-solid fa-flag-swallowtail"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_custom" data-id="emoji_custom"><i class="fa-solid fa-sparkles"></i></div></div></div><i class="arrowchat_more_tip"></i></div></div></div></div><div class="arrowchat_user_send_button"> <i class="fa-solid fa-paper-plane-top"></i> </div></div>').appendTo(a("#arrowchat_popout_chat")),a('<div id="arrowchat_user_upload_queue_'+o+'" class="arrowchat_users_upload_queue"></div><div class="arrowchat_info_panel" data-id="'+o+'"><div class="arrowchat_info_user"><div class="arrowchat_info_avatar arrowchat_white_background"><img src="'+uc_avatar[o]+'" alt="" /><span class="arrowchat_tab_letter"></span></div><div class="arrowchat_info_name_wrapper"><div class="arrowchat_info_name"><a target="_blank" href="'+uc_link[o]+'">'+uc_name[o]+'</a></div><div class="arrowchat_info_status">'+b+'</div></div><div class="arrowchat_clearfix"></div></div><div class="arrowchat_info_options"><div class="arrowchat_info_option_wrapper arrowchat_option_clear" id="arrowchat_option_clear_'+o+'"><div class="arrowchat_info_option_pic far fa-trash-can"></div><div class="arrowchat_info_option_txt">'+lang[24]+'</div></div><div class="arrowchat_info_option_wrapper arrowchat_option_ban" id="arrowchat_option_ban_'+o+'"><div class="arrowchat_info_option_pic far fa-user-xmark"></div><div class="arrowchat_info_option_txt">'+lang[84]+'</div></div><div class="arrowchat_info_option_wrapper arrowchat_option_report" id="arrowchat_option_report_'+o+'"><div class="arrowchat_info_option_pic far fa-triangle-exclamation"></div><div class="arrowchat_info_option_txt">'+lang[167]+"</div></div></div></div>").prependTo(e[o]),a(".arrowchat_closed_image",t[o]).css("background-color",g.color),a(".arrowchat_tab_letter",t[o]).html(g.character),a(".arrowchat_avatarbox",e[o]).css("background-color",g.color),a(".arrowchat_info_avatar",e[o]).css("background-color",g.color),a(".arrowchat_avatartab",t[o]).css("background-color",g.color),a(".arrowchat_tab_letter",e[o]).html(g.character),1!=c_enable_moderation&&a(".arrowchat_option_report").hide(),a("#arrowchat_option_ban_"+o).click(function(){a(".arrowchat_closebox_bottom",t[o]).click(),a.post(c_ac_path+"includes/json/send/send_settings.php",{block_chat:o},function(){void 0===blockList[o]&&(blockList[o]=o),l()})}),a(".arrowchat_info_option_wrapper").mouseenter(function(){a(this).addClass("arrowchat_info_option_wrapper_hover")}),a(".arrowchat_info_option_wrapper").mouseleave(function(){a(this).removeClass("arrowchat_info_option_wrapper_hover")}),a("#arrowchat_option_clear_"+o).click(function(){a("#arrowchat_popout_text_"+o).html(""),a.post(c_ac_path+"includes/json/send/send_settings.php",{clear_chat:o},function(){})}),a("#arrowchat_option_report_"+o).click(function(){a("#arrowchat_option_report_"+o).hide(),a.post(c_ac_path+"includes/json/send/send_settings.php",{report_from:u_id,report_about:o},function(){Y("arrowchat_chatroom_message_flyout",lang[168],"notice")})}),a("#arrowchat_info_"+o).mouseenter(function(){a(this).addClass("arrowchat_popout_info_hover"),n(a(this),lang[23],!1,a(this).width()+18,6,1,!1)}),a("#arrowchat_info_"+o).mouseleave(function(){a(this).removeClass("arrowchat_popout_info_hover"),h()}),a("#arrowchat_info_"+o).click(function(){h(),a(".arrowchat_info_panel",e[o]).is(":visible")?(a(".arrowchat_info_panel",e[o]).hide(),e[o].removeClass("arrowchat_info_panel_visible"),a(this).removeClass("arrowchat_popout_info_clicked"),a(".arrowchat_popout_convo",e[o]).css("margin-right","0px"),a(".arrowchat_popout_input_container",e[o]).css("margin-right","0px")):(a(".arrowchat_info_panel",e[o]).show(),e[o].addClass("arrowchat_info_panel_visible"),a(this).addClass("arrowchat_popout_info_clicked"),a(".arrowchat_popout_convo",e[o]).css("margin-right","201px"),a(".arrowchat_popout_input_container",e[o]).css("margin-right","201px"))}),a(".arrowchat_closebox_bottom",t[o]).mouseenter(function(){a(this).addClass("arrowchat_closebox_bottomhover")}),a(".arrowchat_closebox_bottom",t[o]).mouseleave(function(){a(this).removeClass("arrowchat_closebox_bottomhover")}),t[o].mouseenter(function(){a(this).addClass("arrowchat_tabmouseover_popout")}),t[o].mouseleave(function(){a(this).removeClass("arrowchat_tabmouseover_popout")}),1==c_video_chat?(a("#arrowchat_video_chat_"+o).mouseenter(function(){"offline"==uc_status[o]||"busy"==uc_status[o]&&2!=c_video_select&&3!=c_video_select?n(a(this),lang[146],!1,a(this).width()+18,6,1,!1):(n(a(this),lang[88],!1,a(this).width()+18,6,1,!1),a(this).addClass("arrowchat_popout_info_hover"))}),a("#arrowchat_video_chat_"+o).mouseleave(function(){a(this).removeClass("arrowchat_popout_info_hover"),h()}),"offline"==uc_status[o]||"busy"==uc_status[o]&&2!=c_video_select&&3!=c_video_select?a(".arrowchat_popout_video_chat",e[o]).addClass("arrowchat_video_unavailable"):a(".arrowchat_popout_video_chat",e[o]).removeClass("arrowchat_video_unavailable"),a("#arrowchat_video_chat_"+o).click(function(){if(h(),"offline"!=uc_status[o]&&("busy"!=uc_status[o]||2==c_video_select||3==c_video_select)){for(var r=Math.floor(9999999999*Math.random());String(r).length<10;)r="0"+r;(4==c_video_select||1==c_video_select)&&(r=encodeURI(location.host).replace(/\./g,"")+r),2==c_video_select?a.ajax({type:"post",url:c_ac_path+"public/video/video_session.php",data:{room:r},async:!1,success:function(r){a.post(c_ac_path+"includes/json/send/send_message.php",{userid:u_id,to:o,message:"video{"+r+"}"},function(t){a.isNumeric(t)?(jqac.arrowchat.videoWith(r),Y("arrowchat_chatroom_message_flyout",lang[63],"notice")):a.each(t,function(o,r){"error"==o&&a.each(r,function(a,o){Y("arrowchat_chatroom_message_flyout",o.m,"error")})}),a("#arrowchat_popout_text_"+o).scrollTop(a("#arrowchat_popout_text_"+o)[0].scrollHeight)})}}):a.post(c_ac_path+"includes/json/send/send_message.php",{userid:u_id,to:o,message:"video{"+r+"}"},function(t){a.isNumeric(t)?(jqac.arrowchat.videoWith(r),Y("arrowchat_chatroom_message_flyout",lang[63],"notice")):a.each(t,function(o,r){"error"==o&&a.each(r,function(a,o){Y("arrowchat_chatroom_message_flyout",o.m,"error")})}),a("#arrowchat_popout_text_"+o).scrollTop(a("#arrowchat_popout_text_"+o)[0].scrollHeight)})}else Y("arrowchat_chatroom_message_flyout",lang[146],"error")})):a(".arrowchat_popout_video_chat").hide(),a(".arrowchat_closebox_bottom",t[o]).click(function(){a.post(c_ac_path+"includes/json/send/send_settings.php",{close_chat:o,tab_alert:1},function(){}),e[o].remove(),t[o].remove(),delete e[o],delete t[o],aN[o]=null,aq[o]=null,a9[o]=0,v()}),a(".arrowchat_textarea",e[o]).keydown(function(r){return function o(r,t,e){if(clearTimeout(aQ),aQ=setTimeout(function(){a.post(c_ac_path+"includes/json/send/send_typing.php",{userid:u_id,typing:e,untype:1},function(){}),aB=-1},5e3),aB!=e&&(a.post(c_ac_path+"includes/json/send/send_typing.php",{userid:u_id,typing:e},function(){}),aB=e),13==r.keyCode&&0==r.shiftKey)return H(t,e),!1}(r,a(this),o)}),a(".arrowchat_textarea",e[o]).keyup(function(r){var t,s,i;return a(this),void(a(".arrowchat_smiley_popout",e[i=o]).is(":visible")&&a(".arrowchat_smiley_popout",e[i]).children(".arrowchat_more_popout").hide(),a(".arrowchat_popout_convo",e[i]).scrollTop(a(".arrowchat_popout_convo",e[i])[0].scrollHeight))}),t[o].click(function(){var r=0;a(".arrowchat_popout_alert",t[o]).length>0&&(r=1,a(".arrowchat_popout_alert",t[o]).remove(),aq[o]=0,aN[o]=0,u()),a(this).hasClass("arrowchat_popout_focused")?(a(this).removeClass("arrowchat_popout_focused"),e[o].removeClass("arrowchat_popout_convo_focused"),a.post(c_ac_path+"includes/json/send/send_settings.php",{unfocus_chat:o,tab_alert:1},function(){})):(a(".arrowchat_popout_tab").removeClass("arrowchat_popout_focused"),a(".arrowchat_popout_convo_wrapper").removeClass("arrowchat_popout_convo_focused"),1!=a9[o]&&(function o(r,t){t||(t=1),t>1&&a('<div class="arrowchat_message_history_loading" style="text-align:center;padding:5px 0;"><img src="'+c_ac_path+"themes/"+u_theme+'/images/img-loading.gif" alt="Loading" /></div>').prependTo(a("#arrowchat_popout_text_"+r)),a.ajax({cache:!1,url:c_ac_path+"includes/json/receive/receive_history.php",data:{chatbox:r,history:t},type:"post",dataType:"json",success:function(s){if(a(".arrowchat_message_history_loading").remove(),aI[r]=0,numMessages=0,s){1==t&&a(".arrowchat_popout_convo",e[r]).html(""),aK[r]=null;var i="",h=uc_name[r],n=!1,l=[];a.each(s,function(o,t){"messages"==o&&a.each(t,function(a,o){a="";var t="";numMessages++,1==o.self?(fromname=u_name,fromid=u_id,a=" arrowchat_self",_aa5=_aa4="",avatar=u_avatar,t="<div class='arrowchat_pending_icon arrowchat_pending_delivered'></div>"):(fromname=h,fromid=r,_aa4='<a target="_blank" href="'+uc_link[r]+'">',_aa5="</a>",avatar=uc_avatar[o.from]),aU[o.from]!=fromid&&void 0!==aU[o.from]&&l.push(aM[o.from]);var e="",s="",p=new Date(1e3*o.sent);tooltip=k(p,1),1!=c_show_full_name&&-1!=fromname.indexOf(" ")&&(fromname=fromname.slice(0,fromname.indexOf(" "))),"<div"==o.message.substr(0,4)&&(e=" arrowchat_image_msg"),(null==aK[o.from]||o.sent-aK[o.from]>180)&&(s=" arrowchat_show_time");var w=C(fromname);i+='<div class="arrowchat_chatboxmessage arrowchat_clearfix'+a+e+s+'" id="arrowchat_message_'+o.id+'">'+k(p)+'<div class="arrowchat_chatboxmessagefrom arrowchat_single_avatar_hide arrowchat_white_background" style="background-color:'+w.color+'"><span class="arrowchat_tab_letter arrowchat_tab_letter_xsmall">'+w.character+'</span><img alt="'+fromname+'" class="arrowchat_chatbox_avatar" src="'+avatar+'" /></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="'+tooltip+'">'+o.message+"</div></div>"+t+"</div>",aK[o.from]=o.sent,aU[o.from]=fromid,aM[o.from]=o.id,n=!0})});var p=a("#arrowchat_popout_text_"+r).children("div").first("div");t>1?a(i).prependTo(a("#arrowchat_popout_text_"+r).first("div")):a("#arrowchat_popout_text_"+r).html("<div>"+i+"</div>"),a("#arrowchat_message_"+aM[r]).length&&a("#arrowchat_message_"+aM[r]).children(".arrowchat_chatboxmessagefrom").removeClass("arrowchat_single_avatar_hide"),a.each(l,function(o,r){a("#arrowchat_message_"+r).length&&a("#arrowchat_message_"+r).children(".arrowchat_chatboxmessagefrom").removeClass("arrowchat_single_avatar_hide")}),a(".arrowchat_pending_icon",a("#arrowchat_popout_text_"+r)).hide(),a(".arrowchat_tabcontenttext div .arrowchat_pending_icon:last",a("#arrowchat_popout_text_"+r)).show(),_(),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1);var w=0;p.prevAll().each(function(){w+=a(this).outerHeight()}),1==t?a("#arrowchat_popout_text_"+r).scrollTop(5e4):a("#arrowchat_popout_text_"+r).scrollTop(w),a("#arrowchat_popout_text_"+r).scroll(function(){50>a("#arrowchat_popout_text_"+r).scrollTop()&&1!=aI[r]&&(aI[r]=1,20==numMessages&&o(r,++t))}),0==numMessages&&1==t&&(a("#arrowchat_popout_text_"+r).html('<div class="arrowchat_no_recent_convo"><i class="fas fa-hand-wave"></i>'+lang[245]+"</p>"),a("#arrowchat_popout_text_"+r).html('<div class="arrowchat_no_recent_convo"><i class="fas fa-hand-wave"></i>'+lang[245]+"</p>")),1==t&&a(".arrowchat_chatboxmessagecontent>div>img,.arrowchat_emoji_text>img").one("load",function(){a("#arrowchat_popout_text_"+r).scrollTop(5e4)}).each(function(){this.complete&&a(this).trigger("load")})}}})}(o),a9[o]=1),void 0===aP[o]&&(aP[o]=1),1==aP[o]&&(a.post(c_ac_path+"includes/json/send/send_settings.php",{focus_chat:o,tab_alert:r},function(){}),a(".arrowchat_textarea",e[o]).focus()),aP[o]=1,a(this).addClass("arrowchat_popout_focused"),e[o].addClass("arrowchat_popout_convo_focused")),a(".arrowchat_popout_convo",e[o]).scrollTop(a(".arrowchat_popout_convo",e[o])[0].scrollHeight)}),a(".arrowchat_emoji_selector",e[o]).click(function(){if(!a(this).hasClass("arrowchat_emoji_focused")){a(".arrowchat_emoji_wrapper",e[o]).html('<div class="arrowchat_loading_icon"></div>'),a(".arrowchat_emoji_selector",e[o]).removeClass("arrowchat_emoji_focused"),a(this).addClass("arrowchat_emoji_focused");var r=a(this).attr("data-id");a.ajax({url:c_ac_path+"includes/emojis/"+r+".php",type:"GET",cache:!0,success:function(r){a(".arrowchat_emoji_wrapper",e[o]).html(r),a(".arrowchat_emoji",e[o]).click(function(){if(a(this).hasClass("arrowchat_emoji_custom"))var r=a(this).children("img").attr("data-id");else var r=a(this).html();var t=a(".arrowchat_textarea",e[o]).val();a(".arrowchat_textarea",e[o]).focus().val("").val(t+r)})}})}}),a(".arrowchat_emoji_selector").mouseover(function(){a(this).addClass("arrowchat_emoji_selector_hover")}),a(".arrowchat_emoji_selector").mouseout(function(){a(this).removeClass("arrowchat_emoji_selector_hover")}),a(".arrowchat_emoji_smileys").mouseover(function(){n(a(this),lang[230],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_animals").mouseover(function(){n(a(this),lang[231],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_food").mouseover(function(){n(a(this),lang[232],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_activities").mouseover(function(){n(a(this),lang[233],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_travel").mouseover(function(){n(a(this),lang[234],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_objects").mouseover(function(){n(a(this),lang[235],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_symbols").mouseover(function(){n(a(this),lang[236],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_flags").mouseover(function(){n(a(this),lang[237],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_custom").mouseover(function(){n(a(this),lang[238],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_smiley_button",e[o]).mouseenter(function(){a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").is(":visible")||n(a(this),lang[307],0,10,0),a(this).addClass("arrowchat_smiley_button_hover")}),a(".arrowchat_smiley_button",e[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_smiley_button_hover")}),a(".arrowchat_smiley_button",e[o]).click(function(){h(),a(".arrowchat_giphy_popout",e[o]).children(".arrowchat_more_popout").is(":visible")&&a(".arrowchat_giphy_popout",e[o]).children(".arrowchat_more_popout").hide(),a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").is(":visible")?a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").hide():(a(".arrowchat_emoji_selector",e[o]).hasClass("arrowchat_emoji_focused")||(a(".arrowchat_emoji_wrapper",e[o]).html('<div class="arrowchat_loading_icon"></div>'),a(".arrowchat_emoji_selector",e[o]).removeClass("arrowchat_emoji_focused"),a(".arrowchat_emoji_smileys",e[o]).addClass("arrowchat_emoji_focused"),a.ajax({url:c_ac_path+"includes/emojis/emoji_smileys.php",type:"GET",cache:!0,success:function(r){a(".arrowchat_emoji_wrapper",e[o]).html(r),a(".arrowchat_emoji",e[o]).click(function(){if(a(this).hasClass("arrowchat_emoji_custom"))var r=a(this).children("img").attr("data-id");else var r=a(this).html();var t=a(".arrowchat_textarea",e[o]).val();a(".arrowchat_textarea",e[o]).focus().val("").val(t+r)})}})),a(".arrowchat_textarea",e[o]).focus(),a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").show())}).children().not("i").click(function(a){return!1}),a("body").click(function(o){a(o.target).closest(".arrowchat_smiley_button").length||a(".arrowchat_smiley_popout .arrowchat_more_popout").hide()}),a(".arrowchat_user_send_button",e[o]).mouseenter(function(){n(a(this),lang[311],0,10,0),a(this).addClass("arrowchat_user_send_button_hover")}),a(".arrowchat_user_send_button",e[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_user_send_button_hover")}),a(".arrowchat_user_send_button",e[o]).click(function(){h(),H(a(".arrowchat_textarea",e[o]),o)}),a(".arrowchat_giphy_button",e[o]).mouseenter(function(){a(".arrowchat_giphy_button",e[o]).find(".arrowchat_more_popout").is(":visible")||(n(a(this),lang[309],1,10,0),a(this).addClass("arrowchat_giphy_button_hover"))}),a(".arrowchat_giphy_button",e[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_giphy_button_hover")}),a(".arrowchat_giphy_button",e[o]).click(function(){h(),a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").is(":visible")&&a(".arrowchat_smiley_popout",e[o]).children(".arrowchat_more_popout").hide(),a(".arrowchat_giphy_popout",e[o]).children(".arrowchat_more_popout").is(":visible")?a(".arrowchat_giphy_popout",e[o]).children(".arrowchat_more_popout").hide():(a(".arrowchat_giphy_popout",e[o]).children(".arrowchat_more_popout").show(),a(".arrowchat_giphy_search",e[o]).val(""),a(".arrowchat_giphy_search",e[o]).focus(),N("https://api.giphy.com/v1/gifs/trending?api_key=IOYyr4NK5ldaU&limit=20",1,o))}).children(".arrowchat_giphy_popout").click(function(a){return!1}),a("body").click(function(o){a(o.target).closest(".arrowchat_giphy_button").length||a(".arrowchat_giphy_button .arrowchat_more_popout").hide()}),a(".arrowchat_giphy_search",e[o]).keyup(function(){a(".arrowchat_giphy_image_wrapper",e[o]).html('<div class="arrowchat_loading_icon"></div>'),""==a(".arrowchat_giphy_search",e[o]).val()?N("https://api.giphy.com/v1/gifs/trending?api_key=IOYyr4NK5ldaU&limit=20",1,o):N("https://api.giphy.com/v1/gifs/search?api_key=IOYyr4NK5ldaU&limit=20&q="+a(".arrowchat_giphy_search",e[o]).val(),1,o)}),1==c_disable_smilies&&(a(".arrowchat_smiley_button").hide(),a(".arrowchat_popout_input_container",e[o]).addClass("arrowchat_no_smiley")),1!=c_file_transfer&&(a("#arrowchat_upload_button_"+o).remove(),a(".arrowchat_popout_input_container",e[o]).addClass("arrowchat_no_file_upload")),1==c_giphy&&(a(".arrowchat_giphy_button",e[o]).hide(),a(".arrowchat_popout_input_container",e[o]).addClass("arrowchat_no_giphy")),1==c_file_transfer&&q(o,0),1!=w&&t[o].click(),aN[o]=0,aq[o]=0}v()}function N(o,r,t){var s;s=1==r?e[t]:i[t],a.ajax({url:o,type:"get",cache:!1,dataType:"json",success:function(o){o&&a.each(o,function(o,h){if("data"==o){a(".arrowchat_giphy_image_wrapper",s).html("");var n=0;a.each(h,function(o,r){n=Math.round(270/(r.images.fixed_height_downsampled.width/r.images.fixed_height_downsampled.height)),a(".arrowchat_giphy_image_wrapper",s).append('<img class="arrowchat_giphy_image" src="'+r.images.fixed_height_downsampled.url+'" alt="" style="height:'+n+'px;width:270px" height="'+n+'" />')}),a(".arrowchat_giphy_image",s).click(function(){a(".arrowchat_giphy_popout",s).children(".arrowchat_more_popout").hide();var o=a(this).attr("src");2==r?a.post(c_ac_path+"includes/json/send/send_message_chatroom.php",{userid:u_id,username:u_name,chatroomid:t,message:"giphy{"+a(this).attr("height")+"}{"+a(this).attr("src")+"}"},function(r){if(a.isNumeric(r)){if(a("#arrowchat_chatroom_message_"+r).length);else{var e=k(new Date(1e3*Math.floor((new Date).getTime()/1e3)),1);a(".arrowchat_popout_convo",i[t]).append('<div class="arrowchat_chatroom_box_message arrowchat_self arrowchat_image_msg arrowchat_chatroom_important" id="arrowchat_chatroom_message_'+r+'"><div class="arrowchat_chatroom_message_name">'+u_name+'</div><div class="arrowchat_chatroom_msg_wrap"><div class="arrowchat_chatroom_message_content" data-id="'+e+'"><span class="arrowchat_chatroom_msg"><div class="arrowchat_giphy_message"><img class="arrowchat_lightbox arrowchat_giphy_img" data-id="'+o+'" src="'+o+'" alt="" /></div></span></div><div class="arrowchat_message_controls"><div class="arrowchat_chatroom_reply"><i class="fas fa-reply"></i></div><div class="arrowchat_chatroom_delete" data-id="'+r+'"><i class="far fa-xmark"></i></div></div></div><div class="arrowchat_pending_icon arrowchat_pending_delivered"></div></div>');var s=[r,u_name,'<div class="arrowchat_giphy_message"><img class="arrowchat_lightbox" data-id="'+o+'" src="'+o+'" alt="" style="width:179px"></div>',t];a8(JSON.stringify(s),"send_chatroom_message"),z()}}else a.each(r,function(o,r){"error"==o&&a.each(r,function(a,o){Y("arrowchat_chatroom_message_flyout",o.m,"error")})});a(".arrowchat_popout_convo",i[t]).scrollTop(a(".arrowchat_popout_convo",i[t])[0].scrollHeight)}):a.post(c_ac_path+"includes/json/send/send_message.php",{userid:u_id,to:t,message:"giphy{"+a(this).attr("height")+"}{"+a(this).attr("src")+"}"},function(r){if(a.isNumeric(r)){if(a("#arrowchat_message_"+r).length);else{var s=k(new Date(1e3*Math.floor((new Date).getTime()/1e3)),1);a(".arrowchat_popout_convo",e[t]).append('<div class="arrowchat_chatboxmessage arrowchat_clearfix arrowchat_self arrowchat_image_msg" id="arrowchat_message_'+r+'"><span class="arrowchat_ts" style="display: none;"></span><div class="arrowchat_chatboxmessagefrom arrowchat_white_background"><div class="arrowchat_disable_avatars_name">'+u_name+'</div></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="'+s+'"><div class="arrowchat_giphy_message"><img class="arrowchat_lightbox arrowchat_giphy_img" data-id="'+o+'" src="'+o+'" alt="" /></div></div></div><div class="arrowchat_pending_icon arrowchat_pending_delivered"></div></div>');var i=Math.floor((new Date).getTime()/1e3);a8(JSON.stringify([r,t,'<div class="arrowchat_giphy_message"><img class="arrowchat_lightbox" data-id="'+o+'" src="'+o+'" alt="" style="width:179px"></div>',i,1,1]),"private_message"),_()}}else a.each(r,function(o,r){"error"==o&&a.each(r,function(a,o){Y("arrowchat_chatroom_message_flyout",o.m,"error")})});a(".arrowchat_popout_convo",e[t]).scrollTop(a(".arrowchat_popout_convo",e[t])[0].scrollHeight)})})}})}})}function q(o,r){t=1==r?i[o]:e[o];var t,s=Math.round(new Date().getTime()),l=c_ac_path.replace("../","/");a("#arrowchat_upload_button_"+o).uploadifive({uploadScript:l+"includes/classes/class_uploads.php",buttonText:" ",buttonClass:"arrowchat_upload_user_button",removeCompleted:!0,formData:{unixtime:s,user:u_id},queueID:"arrowchat_user_upload_queue_"+o,height:"auto",width:"auto",multi:!1,auto:!0,fileType:".avi,.bmp,.doc,.docx,.gif,.ico,.jpeg,.jpg,.mp3,.mp4,.pdf,.png,.ppt,.pptx,.rar,.tar,.txt,.wav,.wmv,.xls,.xlsx,.zip,.7z",fileSizeLimit:c_max_upload_size+"MB",onError:function(o,r,e,s){a(".arrowchat_textarea",t).focus()},onCancel:function(o){a(".arrowchat_textarea",t).focus()},onUploadComplete:function(e){var i="file",h=e.type.toLowerCase();("image/jpeg"==h||"image/gif"==h||"image/jpg"==h||"image/png"==h)&&(i="image");var n="includes/json/send/send_message.php",l="arrowchat_message_";1==r&&(n="includes/json/send/send_message_chatroom.php",l="arrowchat_chatroom_message_"),a.post(c_ac_path+n,{userid:u_id,username:u_name,chatroomid:o,to:o,message:i+"{"+s+"}{"+e.name+"}"},function(h){if(a.isNumeric(h)){if(a("#"+l+h).length);else{var n="",p=k(new Date(1e3*Math.floor((new Date).getTime()/1e3)),1);if("image"==i?(a(".arrowchat_popout_convo",t).append('<div class="arrowchat_chatboxmessage arrowchat_clearfix arrowchat_self arrowchat_image_msg" id="'+l+h+'"><span class="arrowchat_ts" style="display: none;">'+p+'</span><div class="arrowchat_chatboxmessagefrom arrowchat_white_background"><div class="arrowchat_disable_avatars_name">'+u_name+'</div></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="'+p+'"><div class="arrowchat_image_message"><img data-id="'+c_ac_path+"public/download.php?file="+s+'" src="'+c_ac_path+"public/download.php?file="+s+'_t" alt="Image" class="arrowchat_lightbox" /></div></div></div><div class="arrowchat_pending_icon arrowchat_pending_delivered"></div></div>'),n='<div class="arrowchat_image_message"><img data-id="'+c_ac_path+"public/download.php?file="+s+'" src="'+c_ac_path+"public/download.php?file="+s+'_t" alt="Image" class="arrowchat_lightbox" /></div>',a(".arrowchat_chatboxmessagecontent>div>img,.arrowchat_emoji_text>img").one("load",function(){setTimeout(function(){a(".arrowchat_popout_convo").scrollTop(5e4)},500)}).each(function(){this.complete&&a(this).trigger("load")})):(a(".arrowchat_popout_convo",t).append('<div class="arrowchat_chatboxmessage arrowchat_clearfix arrowchat_self arrowchat_image_msg" id="'+l+h+'"><span class="arrowchat_ts" style="display: none;">'+p+'</span><div class="arrowchat_chatboxmessagefrom arrowchat_white_background"><div class="arrowchat_disable_avatars_name">'+u_name+'</div></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="'+p+'"><div class="arrowchat_action_message"><div class="arrowchat_action_message_wrapper">'+lang[69]+'</div><div class="arrowchat_action_message_action"><a href="'+c_ac_path+"public/download.php?file="+s+'">'+e.name+'</a></div></div></div></div><div class="arrowchat_pending_icon arrowchat_pending_delivered"></div></div>'),n='<div class="arrowchat_action_message"><div class="arrowchat_action_message_wrapper">'+lang[69]+'</div><div class="arrowchat_action_message_action"><a href="'+c_ac_path+"public/download.php?file="+s+'">'+e.name+"</a></div></div>"),1==r){z();var w=[h,u_name,n,o];a8(JSON.stringify(w),"send_chatroom_message")}else{_();var m=Math.floor((new Date).getTime()/1e3),w=[h,o,n,m,1,1];a8(JSON.stringify(w),"private_message")}}}else a.each(h,function(o,r){"error"==o&&a.each(r,function(a,o){Y("arrowchat_chatroom_message_flyout",o.m,"error")})});a(".arrowchat_popout_convo").scrollTop(5e4)}),a(".arrowchat_textarea",t).focus(),q(o,r)}}),a(".arrowchat_upload_user_button").mouseenter(function(){n(a(this),lang[310],1,20,-8),a(".arrowchat_upload_button_container").addClass("arrowchat_upload_button_hover")}),a(".arrowchat_upload_user_button").mouseleave(function(){h(),a(".arrowchat_upload_button_container").removeClass("arrowchat_upload_button_hover")})}function D(){a("#arrowchat_popout_left_lists").html(""),a(".arrowchat_nofriends").remove(),a('<div class="arrowchat_loading_icon"></div>').appendTo("#arrowchat_popout_friends"),a.ajax({url:c_ac_path+"includes/json/receive/receive_chatroom_list.php",cache:!1,type:"post",dataType:"json",success:function(o){var r,t,e,s,i;r=o,a(".arrowchat_loading_icon").remove(),a(".arrowchat_nofriends").remove(),a("#arrowchat_popout_left_lists").html(""),t="",e="",s=0,i="",r&&a.each(r,function(o,r){"chatrooms"==o&&a.each(r,function(a,o){s++,t='<div id="arrowchat_chatroom_'+o.id+'" class="arrowchat_chatroom_list"><div class="arrowchat_chatroom_image"><img src="'+c_ac_path+"themes/"+u_theme+"/images/icons/"+o.img+'" alt="" /></div><div class="arrowchat_chatroom_name_wrapper"><div class="arrowchat_chatroom_name">'+o.n+'<i class="arrowchat_chatroom_status arrowchat_chatroom_'+o.t+'"></i></div><div class="arrowchat_chatroom_desc">'+o.d+'</div></div><div class="arrowchat_chatroom_status_wrapper"><div class="arrowchat_chatroom_count"><i class="fad fa-circle-user"></i><span>'+o.c+'</span></div></div><div class="arrowchat_clearfix"></div></div>',1==o.o?i+=t:e+=t,cr_name[o.id]=o.n,cr_desc[o.id]=o.d,cr_welcome[o.id]=o.welcome,cr_img[o.id]=o.img,cr_type[o.id]=o.t,cr_count[o.id]=o.c,cr_other[o.id]=o.o})}),0==s&&a('<div class="arrowchat_nofriends">'+lang[318]+"</div>").appendTo("#arrowchat_popout_friends"),""!=e&&(a('<div class="arrowchat_chatroom_list_title">'+lang[227]+"</div>").appendTo(a("#arrowchat_popout_left_lists")),a(e).appendTo(a("#arrowchat_popout_left_lists"))),""!=i&&(a('<div class="arrowchat_chatroom_list_title">'+lang[228]+"</div>").appendTo(a("#arrowchat_popout_left_lists")),a(i).appendTo(a("#arrowchat_popout_left_lists"))),a(".arrowchat_chatroom_list").mouseover(function(){a(this).addClass("arrowchat_chatroom_list_hover")}).mouseout(function(){a(this).removeClass("arrowchat_chatroom_list_hover")}),a(".arrowchat_chatroom_list").click(function(o){var r,t=19;r=a(this),a(r).attr("id")&&(c=a(r).attr("id").substr(t)),""==c&&(c=a(r).parent().attr("id").substr(t)),2==cr_type[c]?(a("#arrowchat_chatroom_password_id").val(c),a("#arrowchat_chatroom_"+c).hasClass("arrowchat_chatroom_clicked")?(a("#arrowchat_chatroom_password_flyout").hide("slide",{direction:"up"},250),a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"),a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity")):(a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"),a("#arrowchat_chatroom_"+c).addClass("arrowchat_chatroom_clicked"),a("#arrowchat_chatroom_password_flyout").is(":visible")?(a("#arrowchat_chatroom_password_flyout").hide("slide",{direction:"up"},250),a("#arrowchat_chatroom_password_flyout").show("slide",{direction:"up"},250,function(){a("#arrowchat_chatroom_password_input").focus()}),a("#arrowchat_popout_wrapper").addClass("arrowchat_chatroom_opacity")):(a("#arrowchat_chatroom_password_flyout").show("slide",{direction:"up"},250,function(){a("#arrowchat_chatroom_password_input").focus()}),a("#arrowchat_popout_wrapper").addClass("arrowchat_chatroom_opacity")))):(a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity"),a("#arrowchat_chatroom_password_flyout").is(":visible")&&a("#arrowchat_chatroom_password_flyout").hide("slide",{direction:"up"},250),I(c,1),1!=aS[c]&&(S(c,cr_type[c]),aS[c]=1))}),a(".arrowchat_chatroom_count").mouseenter(function(){n(a(this),lang[35],0,5,15)}),a(".arrowchat_chatroom_count").mouseleave(function(){h()})}})}function I(o,r){if(void 0===s[o]){void 0===cr_name[o]&&(cr_name[o]=lang[301]),void 0===cr_desc[o]&&(cr_desc[o]=lang[301]),void 0===cr_img[o]&&(cr_img[o]="chatroom_default.png"),void 0===cr_count[o]&&(cr_count[o]=0);var t=c_ac_path+"themes/"+u_theme+"/images/icons/"+cr_img[o];s[o]=a("<div/>").attr("data-room-id",o).addClass("arrowchat_popout_tab").html('<div class="arrowchat_chatroom_count_window arrowchat_chatroom_count_tab"><i class="fad fa-circle-user"></i><span>'+cr_count[o]+'</span></div><div class="arrowchat_bar_left"><div class="arrowchat_popout_wrap"><img class="arrowchat_avatar_tab" src="'+t+'" /><div class="arrowchat_popout_tab_name">'+cr_name[o]+'</div></div></div><div class="arrowchat_popout_right"><div class="arrowchat_closebox_bottom"><i class="fas fa-xmark"></i></div></div>').appendTo(a("#arrowchat_popout_container")),i[o]=a("<div/>").attr("data-room-id",o).addClass("arrowchat_popout_convo_wrapper").addClass("arrowchat_popout_chatroom_convo").html('<div class="arrowchat_chatroom_user_popouts"></div><div class="arrowchat_popout_convo_right_header"><div class="arrowchat_user_image"><img class="arrowchat_avatar" src="'+t+'"><div class="arrowchat_chatroom_count_window"><i class="fad fa-circle-user"></i><span>'+cr_count[o]+'</span></div></div><div class="arrowchat_header_container"><div class="arrowchat_right_header_name">'+cr_name[o]+'</div><div class="arrowchat_right_header_status">'+cr_desc[o]+'</div></div><div class="arrowchat_popout_room_options far fa-ellipsis" id="arrowchat_room_options_'+o+'"></div><div class="arrowchat_more_user_wrapper"><div class="arrowchat_more_popout arrowchat_more_popout_user"><ul class="arrowchat_inner_menu"><li class="arrowchat_menu_item"><a class="arrowchat_room_sounds arrowchat_menu_anchor"><i class="fa-light fa-music"></i><span>'+lang[101]+'</span><label class="arrowchat_switch"><input type="checkbox" checked="" /><span class="arrowchat_slider"></span></label></a></li><li class="arrowchat_menu_item"><a class="arrowchat_block_private_chats arrowchat_menu_anchor"><i class="fa-light fa-user-slash"></i><span>'+lang[279]+'</span><label class="arrowchat_switch"><input type="checkbox" checked="" /><span class="arrowchat_slider"></span></label></a></li><li class="arrowchat_menu_separator arrowchat_admin_controls"></li><li class="arrowchat_menu_item arrowchat_admin_controls"><a class="arrowchat_chatroom_invisible arrowchat_menu_anchor"><i class="fa-light fa-eye-slash"></i><span>'+lang[319]+'</span><label class="arrowchat_switch"><input type="checkbox" checked="" /><span class="arrowchat_slider"></span></label></a></li><li class="arrowchat_menu_item arrowchat_admin_controls"><a class="arrowchat_edit_description arrowchat_menu_anchor"><i class="fa-light fa-book-copy"></i><span>'+lang[157]+'</span></a></li><li class="arrowchat_menu_item arrowchat_admin_controls"><a class="arrowchat_edit_welcome_msg arrowchat_menu_anchor"><i class="fa-light fa-door-open"></i><span>'+lang[153]+'</span></a></li><li class="arrowchat_menu_item arrowchat_admin_controls"><a class="arrowchat_edit_flood arrowchat_menu_anchor"><i class="fa-light fa-water"></i><span>'+lang[171]+'</span></a></li></ul><div class="arrowchat_flood_menu"><div class="arrowchat_block_wrapper"><i class="fa-light fa-water"></i><span class="arrowchat_block_menu_text">'+lang[172]+'</span><div class="arrowchat_block_buttons_wrapper"><div><select class="arrowchat_flood_select_messages"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="20">20</option></select><span>'+lang[174]+'</span></div><div><select class="arrowchat_flood_select_seconds"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="40">40</option><option value="50">50</option><option value="60">60</option><option value="90">90</option><option value="120">120</option></select><span>'+lang[175]+'</span></div><div class="arrowchat_ui_button arrowchat_flood_save"><div>'+lang[173]+'</div></div></div></div><div class="arrowchat_menu_separator"></div><ul><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_flood_back"><i class="fa-light fa-angles-left"></i><span>'+lang[302]+'</span></a></li></ul></div><i class="arrowchat_more_tip"></i></div></div><div class="arrowchat_popout_display_list fas fa-user" id="arrowchat_display_list_'+o+'"></div></div><div id="arrowchat_popout_text_room_'+o+'" class="arrowchat_popout_convo"></div><div class="arrowchat_popout_input_container"><div class="arrowchat_giphy_button"><i class="fas fa-gif"></i><div class="arrowchat_more_wrapper arrowchat_giphy_popout"><div class="arrowchat_more_popout"><div class="arrowchat_giphy_box"><label class="arrowchat_giphy_search_wrapper"><div class="arrowchat_giphy_magnify"><i class="far fa-magnifying-glass"></i></div><input type="text" class="arrowchat_giphy_search" placeholder="'+lang[214]+'" value="" tabindex="0" /></label><div class="arrowchat_giphy_image_wrapper"><div class="arrowchat_loading_icon"></div></div></div><i class="arrowchat_more_tip"></i></div></div></div><div id="arrowchat_upload_button_'+o+'" class="arrowchat_upload_button_container"><i class="fas fa-camera"></i><div id="arrowchat_chatroom_uploader"> </div></div><div class="arrowchat_textarea_wrapper"><textarea class="arrowchat_textarea" maxlength="'+c_max_chatroom_msg+'" placeholder="'+lang[213]+'"></textarea><div class="arrowchat_smiley_button"><i class="fa-solid fa-face-grin-wide"></i><div class="arrowchat_more_wrapper arrowchat_smiley_popout"><div class="arrowchat_more_popout"><div class="arrowchat_smiley_box"><div class="arrowchat_emoji_wrapper"></div><div class="arrowchat_emoji_select_wrapper"><div class="arrowchat_emoji_selector arrowchat_emoji_smileys" data-id="emoji_smileys"><i class="fa-solid fa-face-grin-beam"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_animals" data-id="emoji_animals"><i class="fa-solid fa-dog"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_food" data-id="emoji_food"><i class="fa-solid fa-fork-knife"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_activities" data-id="emoji_activities"><i class="fa-solid fa-basketball"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_travel" data-id="emoji_travel"><i class="fa-solid fa-plane"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_objects" data-id="emoji_objects"><i class="fa-solid fa-bath"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_symbols" data-id="emoji_symbols"><i class="fa-solid fa-symbols"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_flags" data-id="emoji_flags"><i class="fa-solid fa-flag-swallowtail"></i></div><div class="arrowchat_emoji_selector arrowchat_emoji_custom" data-id="emoji_custom"><i class="fa-solid fa-sparkles"></i></div></div></div><i class="arrowchat_more_tip"></i></div></div></div></div><div class="arrowchat_user_send_button"><i class="fa-solid fa-paper-plane-top"></i></div></div>').appendTo(a("#arrowchat_popout_chat")),a('<div id="arrowchat_user_upload_queue_'+o+'" class="arrowchat_users_upload_queue"></div><div class="arrowchat_info_panel" data-id="'+o+'"><div class="arrowchat_chatroom_list_title arrowchat_popout_room_admins">'+lang[148]+'</div><div class="arrowchat_chatroom_list_admins"></div><div class="arrowchat_chatroom_list_title arrowchat_popout_room_mods">'+lang[149]+'</div><div class="arrowchat_chatroom_list_mods"></div><div class="arrowchat_chatroom_list_title arrowchat_popout_room_users">'+lang[147]+'</div><div class="arrowchat_chatroom_list_users"></div></div>').prependTo(i[o]),ae(s[o],"arrowchat_tabmouseover_popout"),a(".arrowchat_closebox_bottom",s[o]).unbind("click"),a(".arrowchat_closebox_bottom",s[o]).click(function(){var r;a8(".arrowchat_closebox_bottom","ac_click","chatrooms['"+(r=o)+"']"),a.post(c_ac_path+"includes/json/send/send_settings.php",{close_chat:"r"+r},function(){}),s[r].remove(),i[r].remove(),delete s[r],delete i[r],v(),aS[r]=0,Object.keys(s).length<1&&(clearTimeout(a6),a6=-1),1!=c_push_engine&&(g(),b()),V(r,0),aN[r]=null,aq[r]=null}),a("#arrowchat_display_list_"+o).mouseenter(function(){a(this).addClass("arrowchat_popout_info_hover"),n(a(this),lang[312],!1,a(this).width()+18,6,1,!1)}),a("#arrowchat_display_list_"+o).mouseleave(function(){a(this).removeClass("arrowchat_popout_info_hover"),h()}),a("#arrowchat_display_list_"+o).click(function(){h(),a(".arrowchat_info_panel",i[o]).is(":visible")?(a(".arrowchat_info_panel",i[o]).hide(),i[o].removeClass("arrowchat_info_panel_visible"),a(this).removeClass("arrowchat_popout_display_list_clicked"),a(".arrowchat_popout_convo",i[o]).css("margin-right","0px"),a(".arrowchat_popout_input_container",i[o]).css("margin-right","0px")):(a(".arrowchat_info_panel",i[o]).show(),i[o].addClass("arrowchat_info_panel_visible"),a(this).addClass("arrowchat_popout_display_list_clicked"),a(".arrowchat_popout_convo",i[o]).css("margin-right","201px"),a(".arrowchat_popout_input_container",i[o]).css("margin-right","201px")),a("#arrowchat_popout_text_room_"+o).scrollTop(5e4)}),a("#arrowchat_room_options_"+o).mouseenter(function(){a(this).addClass("arrowchat_popout_room_options_hover"),n(a(this),lang[23],!1,a(this).width()+18,6,1,!1)}),a("#arrowchat_room_options_"+o).mouseleave(function(){a(this).removeClass("arrowchat_popout_room_options_hover"),h()}),a("#arrowchat_room_options_"+o).click(function(){h(),a(".arrowchat_more_popout_user",i[o]).toggle(),a(this).toggleClass("arrowchat_more_button_selected"),a(".arrowchat_inner_menu",i[o]).show(),a(".arrowchat_flood_menu",i[o]).hide()}).parent().children(".arrowchat_more_user_wrapper").click(function(){return!1}),a("body").click(function(r){a(r.target).closest(a(".arrowchat_popout_room_options",i[o])).length||(a(".arrowchat_more_popout_user",i[o]).hide(),a(".arrowchat_popout_room_options",i[o]).removeClass("arrowchat_more_button_selected"))}),1==u_chatroom_sound?a(".arrowchat_room_sounds .arrowchat_switch :input",i[o]).prop("checked",!0):(a(".arrowchat_room_sounds").addClass("arrowchat_menu_unchecked"),a(".arrowchat_room_sounds .arrowchat_switch :input",i[o]).prop("checked",!1)),a(".arrowchat_room_sounds",i[o]).click(function(){var r;a(".arrowchat_room_sounds").toggleClass("arrowchat_menu_unchecked"),a(".arrowchat_room_sounds :input",i[o]).is(":checked")?(a(".arrowchat_room_sounds :input").prop("checked",!1),r=-1,u_chatroom_sound=0):(a(".arrowchat_room_sounds :input").prop("checked",!0),r=1,u_chatroom_sound=1),a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_sound:r},function(){})}),1==u_chatroom_block_chats?a(".arrowchat_block_private_chats .arrowchat_switch :input",i[o]).prop("checked",!0):(a(".arrowchat_block_private_chats").addClass("arrowchat_menu_unchecked"),a(".arrowchat_block_private_chats .arrowchat_switch :input",i[o]).prop("checked",!1)),a(".arrowchat_block_private_chats",i[o]).click(function(){var r;a(".arrowchat_block_private_chats").toggleClass("arrowchat_menu_unchecked"),a(".arrowchat_block_private_chats :input",i[o]).is(":checked")?(a(".arrowchat_block_private_chats :input").prop("checked",!1),r=-1,u_chatroom_block_chats=0):(a(".arrowchat_block_private_chats :input").prop("checked",!0),r=1,u_chatroom_block_chats=1),a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_block_chats:r},function(){})}),a(".arrowchat_textarea",i[o]).keydown(function(r){return function a(o,r,t){if(13==o.keyCode&&0==o.shiftKey)return E(r,t),!1}(r,a(".arrowchat_textarea",i[o]),o)}),a(".arrowchat_textarea",i[o]).keyup(function(r){var t,e,s;return a(this),void(a(".arrowchat_smiley_popout",i[s=o]).children(".arrowchat_more_popout").is(":visible")&&a(".arrowchat_smiley_popout",i[s]).children(".arrowchat_more_popout").hide())}),s[o].unbind("click"),s[o].click(function(){a(".arrowchat_popout_alert",s[o]).length>0&&a(".arrowchat_popout_alert",s[o]).remove(),s[o].hasClass("arrowchat_popout_focused")?(a(this).removeClass("arrowchat_popout_focused"),i[o].removeClass("arrowchat_popout_convo_focused"),j="",a.post(c_ac_path+"includes/json/send/send_settings.php",{unfocus_chat:"r"+o},function(){})):(a(".arrowchat_popout_tab").removeClass("arrowchat_popout_focused"),a(".arrowchat_popout_convo_wrapper").removeClass("arrowchat_popout_convo_focused"),1!=aS[o]&&(S(o,cr_type[o]),aS[o]=1),a(this).addClass("arrowchat_popout_focused"),i[o].addClass("arrowchat_popout_convo_focused"),void 0===aV[o]&&(aV[o]=1),1==aV[o]&&(a.post(c_ac_path+"includes/json/send/send_settings.php",{focus_chat:"r"+o},function(){}),a(".arrowchat_textarea",i[o]).focus()),aV[o]=1),a("#arrowchat_popout_text_room_"+o).scrollTop(5e4)}),a(".arrowchat_closebox_bottom",s[o]).mouseenter(function(){a(this).addClass("arrowchat_closebox_bottomhover")}),a(".arrowchat_closebox_bottom",s[o]).mouseleave(function(){a(this).removeClass("arrowchat_closebox_bottomhover")}),a(".arrowchat_emoji_selector",i[o]).click(function(){if(!a(this).hasClass("arrowchat_emoji_focused")){a(".arrowchat_emoji_wrapper",i[o]).html('<div class="arrowchat_loading_icon"></div>'),a(".arrowchat_emoji_selector",i[o]).removeClass("arrowchat_emoji_focused"),a(this).addClass("arrowchat_emoji_focused");var r=a(this).attr("data-id");a.ajax({url:c_ac_path+"includes/emojis/"+r+".php",type:"GET",cache:!0,success:function(r){a(".arrowchat_emoji_wrapper",i[o]).html(r),a(".arrowchat_emoji",i[o]).click(function(){if(a(this).hasClass("arrowchat_emoji_custom"))var r=a(this).children("img").attr("data-id");else var r=a(this).html();var t=a(".arrowchat_textarea",i[o]).val();a(".arrowchat_textarea",i[o]).focus().val("").val(t+r)})}})}}),a(".arrowchat_emoji_selector").mouseover(function(){a(this).addClass("arrowchat_emoji_selector_hover")}),a(".arrowchat_emoji_selector").mouseout(function(){a(this).removeClass("arrowchat_emoji_selector_hover")}),a(".arrowchat_emoji_smileys").mouseover(function(){n(a(this),lang[230],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_animals").mouseover(function(){n(a(this),lang[231],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_food").mouseover(function(){n(a(this),lang[232],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_activities").mouseover(function(){n(a(this),lang[233],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_travel").mouseover(function(){n(a(this),lang[234],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_objects").mouseover(function(){n(a(this),lang[235],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_symbols").mouseover(function(){n(a(this),lang[236],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_flags").mouseover(function(){n(a(this),lang[237],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_emoji_custom").mouseover(function(){n(a(this),lang[238],!1,0,20)}).mouseout(function(){h()}),a(".arrowchat_smiley_button",i[o]).mouseenter(function(){a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").is(":visible")||n(a(this),lang[307],0,10,0),a(this).addClass("arrowchat_smiley_button_hover")}),a(".arrowchat_smiley_button",i[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_smiley_button_hover")}),a(".arrowchat_smiley_button",i[o]).click(function(){h(),a(".arrowchat_giphy_popout",i[o]).children(".arrowchat_more_popout").is(":visible")&&a(".arrowchat_giphy_popout",i[o]).children(".arrowchat_more_popout").hide(),a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").is(":visible")?a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").hide():(a(".arrowchat_emoji_selector",i[o]).hasClass("arrowchat_emoji_focused")||(a(".arrowchat_emoji_wrapper",i[o]).html('<div class="arrowchat_loading_icon"></div>'),a(".arrowchat_emoji_selector",i[o]).removeClass("arrowchat_emoji_focused"),a(".arrowchat_emoji_smileys",i[o]).addClass("arrowchat_emoji_focused"),a.ajax({url:c_ac_path+"includes/emojis/emoji_smileys.php",type:"GET",cache:!0,success:function(r){a(".arrowchat_emoji_wrapper",i[o]).html(r),a(".arrowchat_emoji",i[o]).click(function(){if(a(this).hasClass("arrowchat_emoji_custom"))var r=a(this).children("img").attr("data-id");else var r=a(this).html();var t=a(".arrowchat_textarea",i[o]).val();a(".arrowchat_textarea",i[o]).focus().val("").val(t+r)})}})),a(".arrowchat_textarea",i[o]).focus(),a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").show())}).children().not("i").click(function(a){return!1}),a("body").click(function(o){a(o.target).closest(".arrowchat_smiley_button").length||a(".arrowchat_smiley_popout .arrowchat_more_popout").hide()}),a(".arrowchat_user_send_button",i[o]).mouseenter(function(){n(a(this),lang[311],0,10,0),a(this).addClass("arrowchat_user_send_button_hover")}),a(".arrowchat_user_send_button",i[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_user_send_button_hover")}),a(".arrowchat_user_send_button",i[o]).click(function(){h(),E(a(".arrowchat_textarea",i[o]),o)}),a(".arrowchat_giphy_button",i[o]).mouseenter(function(){a(".arrowchat_giphy_button",i[o]).find(".arrowchat_more_popout").is(":visible")||(n(a(this),lang[309],1,10,0),a(this).addClass("arrowchat_giphy_button_hover"))}),a(".arrowchat_giphy_button",i[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_giphy_button_hover")}),a(".arrowchat_giphy_button",i[o]).click(function(){a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").is(":visible")&&a(".arrowchat_smiley_popout",i[o]).children(".arrowchat_more_popout").hide(),a(".arrowchat_giphy_popout",i[o]).children(".arrowchat_more_popout").is(":visible")?a(".arrowchat_giphy_popout",i[o]).children(".arrowchat_more_popout").hide():(a(".arrowchat_giphy_popout",i[o]).children(".arrowchat_more_popout").show(),a(".arrowchat_giphy_search",i[o]).val(""),a(".arrowchat_giphy_search",i[o]).focus(),N("https://api.giphy.com/v1/gifs/trending?api_key=IOYyr4NK5ldaU&limit=20",2,o))}).children(".arrowchat_giphy_popout").click(function(a){return!1}),a("body").click(function(o){a(o.target).closest(".arrowchat_giphy_button").length||a(".arrowchat_giphy_button .arrowchat_more_popout").hide()}),a(".arrowchat_giphy_search",i[o]).keyup(function(){a(".arrowchat_giphy_image_wrapper",i[o]).html('<div class="arrowchat_loading_icon"></div>'),""==a(".arrowchat_giphy_search",i[o]).val()?N("https://api.giphy.com/v1/gifs/trending?api_key=IOYyr4NK5ldaU&limit=20",2,o):N("https://api.giphy.com/v1/gifs/search?api_key=IOYyr4NK5ldaU&limit=20&q="+a(".arrowchat_giphy_search",i[o]).val(),2,o)}),1==c_disable_smilies&&(a(".arrowchat_smiley_button").hide(),a(".arrowchat_popout_input_container",i[o]).addClass("arrowchat_no_smiley")),(1!=c_file_transfer||1!=c_chatroom_transfer)&&(a("#arrowchat_upload_button_"+o).remove(),a(".arrowchat_popout_input_container",i[o]).addClass("arrowchat_no_file_upload")),1==c_giphy_chatroom&&(a(".arrowchat_giphy_button",i[o]).hide(),a(".arrowchat_popout_input_container",i[o]).addClass("arrowchat_no_giphy")),1==c_chatroom_transfer&&q(o,1),1==r&&s[o].click()}else s[o].hasClass("arrowchat_tabclick")||1==r||s[o].click();v()}function S(o,r,t){a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity");var e=0,h=0,n="",l="",w="";ab[o]=0,a_[o]=0,a.ajax({url:c_ac_path+"includes/json/receive/receive_chatroom_room.php",data:{chatroomid:o,chatroom_pw:t},type:"post",cache:!1,dataType:"json",success:function(r){if(r){var t=!0;r&&a.each(r,function(r,e){"error"==r&&a.each(e,function(r,e){t=!1,void 0!==s[o]&&a(".arrowchat_closebox_bottom",s[o]).click(),D(),Y("arrowchat_chatroom_message_flyout",e.m,"error")})}),t&&(-1==a6&&(a6=setTimeout(function(){L()},3e4)),1!=c_push_engine?(g(),V(o,1),b()):V(o,1),r&&a.each(r,function(r,t){if("user_title"==r&&a.each(t,function(a,r){1==r.admin&&(h=1,a_[o]=1),1==r.mod&&(e=1,ab[o]=1)}),"chat_name"==r&&a.each(t,function(a,r){void 0===cr_name[o]&&(cr_name[o]=r.n)}),"chat_users"==r){var s,m=0,u=0,v=0;a(".arrowchat_chatroom_list_users",i[o]).html(""),a(".arrowchat_chatroom_list_mods",i[o]).html(""),a(".arrowchat_chatroom_list_admins",i[o]).html(""),a(".arrowchat_chatroom_user_popouts",i[o]).html(""),a.each(t,function(r,t){if("invisible"!=t.status){(1==h||1==e)&&(1==t.t||4==t.t)&&(n='<li class="arrowchat_menu_separator"></li><li class="arrowchat_menu_item"><a id="arrowchat_chatroom_make_mod_'+t.id+'" class="arrowchat_chatroom_make_mod arrowchat_menu_anchor"><i class="fa-light fa-user-crown"></i><span>'+lang[52]+'</span></a></li><li class="arrowchat_menu_item"><a id="arrowchat_chatroom_silence_user_'+t.id+'" class="arrowchat_chatroom_silence_user arrowchat_menu_anchor"><i class="fa-light fa-volume-xmark"></i><span>'+lang[161]+'</span></a></li><li class="arrowchat_menu_item"><a id="arrowchat_chatroom_ban_user_'+t.id+'" class="arrowchat_chatroom_ban_user arrowchat_menu_anchor"><i class="fa-light fa-ban"></i><span>'+lang[53]+"</span></a></li>"),1==h&&2==t.t&&(n='<li class="arrowchat_menu_separator"></li><li class="arrowchat_menu_item"><a id="arrowchat_chatroom_remove_mod_'+t.id+'" class="arrowchat_chatroom_remove_mod arrowchat_menu_anchor"><i class="fa-light fa-circle-minus"></i><span>'+lang[54]+"</span></a></li>"),appendVal=a(".arrowchat_chatroom_list_users",i[o]),2==t.t?(appendVal=a(".arrowchat_chatroom_list_mods",i[o]),u++):3==t.t?(appendVal=a(".arrowchat_chatroom_list_admins",i[o]),m++):v++,s=at(t.n),t.n=at(t.n);var l=" fas fa-circle";"away"==t.status?l=" fas fa-moon":"busy"==t.status&&(l=" far fa-mobile-screen"),a("<div/>").attr("data-user-pop-id",t.id).attr("class","arrowchat_chatroom_user").mouseover(function(){a(this).addClass("arrowchat_chatroom_list_hover")}).mouseout(function(){a(this).removeClass("arrowchat_chatroom_list_hover")}).addClass("arrowchat_chatroom_room_list").addClass("arrowchat_chatroom_admin_"+t.t).html('<img class="arrowchat_chatroom_avatar" src="'+t.a+'"/><span class="arrowchat_chatroom_room_name">'+t.n+'</span><span class="arrowchat_userscontentdot arrowchat_'+t.status+l+'"></span>').appendTo(appendVal);var p="";(1==t.b&&1!=h||t.id==u_id)&&(p=" arrowchat_no_private_msg"),a("<div/>").attr("data-user-id",t.id).addClass("arrowchat_more_wrapper_chatroom").html('<div class="arrowchat_more_popout"><div class="arrowchat_chatroom_flyout_avatar"><img src="'+t.a+'" alt="" /></div><ul class="arrowchat_inner_menu arrowchat_chatroom_flyout_info"><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_title arrowchat_menu_anchor"><span class="arrowchat_chatroom_fullname">'+s+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_private_message'+p+'"><i class="fa-light fa-messages"></i><span>'+lang[41]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_block_user"><i class="fa-light fa-user-slash"></i><span>'+lang[84]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_report_user"><i class="fa-light fa-triangle-exclamation"></i><span>'+lang[167]+"</span></a></li>"+n+"</ul></div>").appendTo(a(".arrowchat_chatroom_user_popouts",i[o])),2==t.t?a("#arrowchat_chatroom_title_"+t.id,i[o]).html('<a href="'+t.l+'" target="_blank">'+s+"</a><br/>"+lang[44]):3==t.t?a("#arrowchat_chatroom_title_"+t.id,i[o]).html('<a href="'+t.l+'" target="_blank">'+s+"</a><br/>"+lang[45]):4==t.t&&a("#arrowchat_chatroom_title_"+t.id,i[o]).html('<a href="'+t.l+'" target="_blank">'+s+"</a><br/>"+lang[212]),ae(a(".arrowchat_menu_item"),"arrowchat_more_hover"),M(h)}uc_cr_block[t.id]=t.b});var g=function(a,o){return a.querySelector(".arrowchat_chatroom_room_name").innerHTML.toLowerCase().localeCompare(o.querySelector(".arrowchat_chatroom_room_name").innerHTML.toLowerCase())},b=a(".arrowchat_chatroom_list_users > div",i[o]).get();b.sort(g);for(var r=0;r<b.length;r++)b[r].parentNode.appendChild(b[r]);0==v?a(".arrowchat_popout_room_users",i[o]).hide():a(".arrowchat_popout_room_users",i[o]).show(),0==m?a(".arrowchat_popout_room_admins",i[o]).hide():a(".arrowchat_popout_room_admins",i[o]).show(),0==u?a(".arrowchat_popout_room_mods",i[o]).hide():a(".arrowchat_popout_room_mods",i[o]).show(),a(".arrowchat_chatroom_admin_3").css("background-color","#"+c_admin_bg),a(".arrowchat_chatroom_admin_3").css("color","#"+c_admin_txt)}"chat_history"==r&&(l="",a.each(t,function(a,o){var r=RegExp("(^|\\s)(@"+u_name+")(\\s|$)","i");if(o.m=o.m.replace(r,'$1<span class="arrowchat_at_user">$2</span>$3'),void 0===blockList[o.userid]){var t="",e="";1==o.mod&&(t=lang[137],e=" arrowchat_chatroom_important"),1==o.admin&&(t=lang[137],e=" arrowchat_chatroom_important"),a="";var s="";fromname=o.n;var i="";o.n==u_name&&(a=" arrowchat_self",i="<div class='arrowchat_pending_icon arrowchat_pending_delivered'></div>"),"<div"==o.m.substr(0,4)&&(s=" arrowchat_image_msg");var h=new Date(1e3*o.t),n=k(h,1);if(1==o.global)l+='<div class="arrowchat_chatroom_box_message arrowchat_global_chatroom_message" id="arrowchat_chatroom_message_'+o.id+'"><div class="arrowchat_chatroom_message_content'+a+'">'+k(h)+o.m+"</div></div>";else{var p=C(fromname);l+='<div class="arrowchat_chatroom_box_message'+a+s+e+'" id="arrowchat_chatroom_message_'+o.id+'"><div class="arrowchat_chatroom_message_name"><i class="'+t+'"></i>'+fromname+'</div><div class="arrowchat_chatroom_msg_wrap"><div class="arrowchat_chatbox_avatar_wrapper arrowchat_white_background" style="background-color:'+p.color+'"><img class="arrowchat_chatroom_message_avatar arrowchat_no_names" src="'+o.a+'" alt="'+fromname+'" /><span class="arrowchat_tab_letter arrowchat_tab_letter_xsmall">'+p.character+'</span></div><div class="arrowchat_chatroom_message_content" data-id="'+n+'"><span class="arrowchat_chatroom_msg">'+o.m+'</span></div><div class="arrowchat_message_controls"><div class="arrowchat_chatroom_reply"><i class="fas fa-reply"></i></div><div class="arrowchat_chatroom_delete" data-id="'+o.id+'"><i class="far fa-xmark"></i></div></div></div>'+i+"</div>"}}})),"room_info"==r&&a.each(t,function(a,r){""!=r.welcome_msg&&(w=G(r.welcome_msg),cr_welcome[o]=w,w=p(w)),cr_desc[o]=r.desc,aL[o]=r.limit_msg,az[o]=r.limit_sec})}),a("#arrowchat_popout_text_room_"+o).html(l),z(),""!=w&&a("#arrowchat_popout_text_room_"+o).append('<div class="arrowchat_chatroom_box_message arrowchat_chatroom_welcome_msg arrowchat_global_chatroom_message"><div class="arrowchat_chatroom_message_content">'+w+"</div></div>"),a("#arrowchat_popout_text_room_"+o+" .arrowchat_pending_icon").hide(),a("#arrowchat_popout_text_room_"+o+" .arrowchat_chatroom_box_message .arrowchat_pending_icon:last").show(),P(o),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1),a("#arrowchat_popout_text_room_"+o).scrollTop(5e4),1==h||1==e?A(o):a(".arrowchat_admin_controls",i[o]).hide(),a(".arrowchat_image_msg img,.arrowchat_emoji_text>img").one("load",function(){a("#arrowchat_popout_text_room_"+o).scrollTop(5e4)}).each(function(){this.complete&&a(this).trigger("load")}))}}})}function A(o){a(".arrowchat_admin_controls",i[o]).show(),a(".arrowchat_edit_welcome_msg",i[o]).unbind("click"),a(".arrowchat_edit_welcome_msg",i[o]).click(function(){var r=prompt(lang[154],cr_welcome[o]);(r||""==r)&&a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_welcome_msg:r,chatroom_id:o},function(){Y("arrowchat_chatroom_message_flyout",lang[155],"notice"),cr_welcome[o]=r,a(".arrowchat_popout_room_options",i[o]).click()})}),1==a_[o]?(1==u_chatroom_invisible?a(".arrowchat_chatroom_invisible .arrowchat_switch :input",i[o]).prop("checked",!0):(a(".arrowchat_chatroom_invisible").addClass("arrowchat_menu_unchecked"),a(".arrowchat_chatroom_invisible .arrowchat_switch :input",i[o]).prop("checked",!1)),a(".arrowchat_chatroom_invisible",i[o]).unbind("click"),a(".arrowchat_chatroom_invisible",i[o]).click(function(){a(".arrowchat_chatroom_invisible").toggleClass("arrowchat_menu_unchecked"),a(".arrowchat_chatroom_invisible :input",i[o]).is(":checked")?(a(".arrowchat_chatroom_invisible :input").prop("checked",!1),_chatroominvis=-1,u_chatroom_invisible=0):(a(".arrowchat_chatroom_invisible :input").prop("checked",!0),_chatroominvis=1,u_chatroom_invisible=1),a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_invisible:_chatroominvis},function(){})})):a(".arrowchat_chatroom_invisible").parent(".arrowchat_admin_controls").hide(),a(".arrowchat_edit_description",i[o]).unbind("click"),a(".arrowchat_edit_description",i[o]).click(function(){var r=prompt(lang[158],cr_desc[o]);(r||""==r)&&a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_description:r,chatroom_id:o},function(){Y("arrowchat_chatroom_message_flyout",lang[155],"notice"),cr_desc[o]=r,r=at(r),D(),a(".arrowchat_name_description",i[o]).html(r),a(".arrowchat_popout_room_options",i[o]).click()})}),a(".arrowchat_edit_flood",i[o]).unbind("click"),a(".arrowchat_edit_flood",i[o]).click(function(){a(this).parents(".arrowchat_inner_menu").hide(),a(".arrowchat_flood_select_messages",i[o]).val(aL[o]),a(".arrowchat_flood_select_seconds",i[o]).val(az[o]),a(".arrowchat_flood_menu",i[o]).show()}),a(".arrowchat_flood_back",i[o]).unbind("click"),a(".arrowchat_flood_back",i[o]).click(function(){a(this).parents(".arrowchat_more_popout").find(".arrowchat_inner_menu").show(),a(".arrowchat_flood_menu",i[o]).hide()}),a(".arrowchat_flood_save",i[o]).unbind("click"),a(".arrowchat_flood_save",i[o]).click(function(){a(".arrowchat_popout_room_options",i[o]).click();var r=a(".arrowchat_flood_select_messages",i[o]).val(),t=a(".arrowchat_flood_select_seconds",i[o]).val();isNaN(r)||isNaN(t)||a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_id:o,flood_message:r,flood_seconds:t},function(){Y("arrowchat_chatroom_message_flyout",lang[155],"notice"),aL[o]=r,az[o]=t})})}function L(){if(1!=c_chatrooms)return!1;clearTimeout(a6);var o="",r="";for(var t in s)r+=t+",";r=r.slice(0,-1),a.ajax({url:c_ac_path+"includes/json/receive/receive_chatroom.php",cache:!1,type:"post",data:{chatrooms:r},dataType:"json",success:function(r){if(r.room_data){var t=!0,e=0,h=0;a(".arrowchat_chatroom_create_flyout_display").length&&(e=a(".arrowchat_chatroom_create_flyout_display").parent().attr("data-user-id"),h=a(".arrowchat_chatroom_create_flyout_display").parents(".arrowchat_popout_chatroom_convo").attr("data-room-id")),r.room_data&&a.each(r.room_data,function(r,e){if(0!=e.error&&(t=!1,void 0!==s[c]&&a(".arrowchat_closebox_bottom",s[c]).click(),D(),Y("arrowchat_chatroom_message_flyout",f.m,"error")),a_[e.id]=0,ab[e.id]=0,t){1==e.user_title.admin&&(a_[e.id]=1),1==e.user_title.mod&&(ab[e.id]=1);var h=0,n=0,l=0,p=0;a(".arrowchat_chatroom_list_users",i[e.id]).html(""),a(".arrowchat_chatroom_list_mods",i[e.id]).html(""),a(".arrowchat_chatroom_list_admins",i[e.id]).html(""),a(".arrowchat_chatroom_user_popouts",i[e.id]).html(""),a.each(e.chat_users,function(r,t){if("invisible"!=t.status){o="",p++,(1==a_[e.id]||1==ab[e.id])&&(1==t.t||4==t.t)&&(o='<li class="arrowchat_menu_separator"></li><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_make_mod arrowchat_menu_anchor"><i class="fa-light fa-user-crown"></i><span>'+lang[52]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_silence_user arrowchat_menu_anchor"><i class="fa-light fa-volume-xmark"></i><span>'+lang[161]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_ban_user arrowchat_menu_anchor"><i class="fa-light fa-ban"></i><span>'+lang[53]+"</span></a></li>"),1==a_[e.id]&&2==t.t&&(o='<li class="arrowchat_menu_separator"></li><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_remove_mod arrowchat_menu_anchor"><i class="fa-light fa-circle-minus"></i><span>'+lang[54]+"</span></a></li>");var s=a(".arrowchat_chatroom_list_users",i[e.id]);2==t.t?(s=a(".arrowchat_chatroom_list_mods",i[e.id]),n++):3==t.t?(s=a(".arrowchat_chatroom_list_admins",i[e.id]),h++):l++,t.n=at(t.n);var w=" fas fa-circle";"away"==t.status?w=" fas fa-moon":"busy"==t.status&&(w=" far fa-mobile-screen"),a("<div/>").attr("data-user-pop-id",t.id).attr("class","arrowchat_chatroom_user").mouseover(function(){a(this).addClass("arrowchat_chatroom_list_hover")}).mouseout(function(){a(this).removeClass("arrowchat_chatroom_list_hover")}).addClass("arrowchat_chatroom_room_list").addClass("arrowchat_chatroom_admin_"+t.t).html('<img class="arrowchat_chatroom_avatar" src="'+t.a+'"/><span class="arrowchat_chatroom_room_name">'+t.n+'</span><span class="arrowchat_userscontentdot arrowchat_'+t.status+w+'"></span>').appendTo(s);var m="";(1==t.b&&1!=a_[e.id]||t.id==u_id)&&(m=" arrowchat_no_private_msg"),a("<div/>").attr("data-user-id",t.id).addClass("arrowchat_more_wrapper_chatroom").html('<div class="arrowchat_more_popout"><div class="arrowchat_chatroom_flyout_avatar"><img src="'+t.a+'" alt="" /></div><ul class="arrowchat_inner_menu arrowchat_chatroom_flyout_info"><li class="arrowchat_menu_item"><a class="arrowchat_chatroom_title arrowchat_menu_anchor"><span class="arrowchat_chatroom_fullname">'+t.n+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_private_message'+m+'"><i class="fa-light fa-messages"></i><span>'+lang[41]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_block_user"><i class="fa-light fa-user-slash"></i><span>'+lang[84]+'</span></a></li><li class="arrowchat_menu_item"><a class="arrowchat_menu_anchor arrowchat_chatroom_report_user"><i class="fa-light fa-triangle-exclamation"></i><span>'+lang[167]+"</span></a></li>"+o+"</ul></div>").appendTo(a(".arrowchat_chatroom_user_popouts",i[e.id])),ae(a(".arrowchat_menu_item"),"arrowchat_more_hover")}uc_avatar[t.id]=t.a,uc_cr_block[t.id]=t.b}),M(a_[e.id]);var w=function(a,o){return a.querySelector(".arrowchat_chatroom_room_name").innerHTML.toLowerCase().localeCompare(o.querySelector(".arrowchat_chatroom_room_name").innerHTML.toLowerCase())},m=a(".arrowchat_chatroom_list_users > div").get();m.sort(w);for(var r=0;r<m.length;r++)m[r].parentNode.appendChild(m[r]);0==l?a(".arrowchat_popout_room_users",i[e.id]).hide():a(".arrowchat_popout_room_users",i[e.id]).show(),0==h?a(".arrowchat_popout_room_admins",i[e.id]).hide():a(".arrowchat_popout_room_admins",i[e.id]).show(),0==n?a(".arrowchat_popout_room_mods",i[e.id]).hide():a(".arrowchat_popout_room_mods",i[e.id]).show(),P(e.id),1==a_[e.id]||1==ab[e.id]?A(e.id):a(".arrowchat_admin_controls",i[e.id]).hide(),a(".arrowchat_chatroom_count_window span",i[e.id]).html(p),a(".arrowchat_chatroom_count_window span",s[e.id]).html(p),a("#arrowchat_chatroom_"+e.id).find(".arrowchat_chatroom_count").children("span").html(p)}}),t&&(a(".arrowchat_chatroom_admin_3").css("background-color","#"+c_admin_bg),a(".arrowchat_chatroom_admin_3").css("color","#"+c_admin_txt),0!=e&&a('div[data-user-pop-id="'+e+'"]',i[h]).click(),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1),a("#arrowchat_chatroom_show_names :input").is(":checked")&&ac(0))}}}),clearTimeout(a6),a6=setTimeout(function(){L()},6e4)}function z(){a(".arrowchat_chatroom_msg:not(.arrowchat_global_chatroom_message)").unbind("mouseenter"),a(".arrowchat_chatroom_msg:not(.arrowchat_global_chatroom_message)").mouseenter(function(o){a(this).parents(".arrowchat_chatroom_box_message").hasClass("arrowchat_image_msg")?n(a(this),a(this).parent().attr("data-id"),!1,a(this).parent().width()+23,6,1,!1):n(a(this),a(this).parent().attr("data-id"),!1,a(this).parent().width()-5,-3,1,!1),a(this).parents(".arrowchat_chatroom_box_message").hasClass("arrowchat_self")||a(this).parents(".arrowchat_chatroom_msg_wrap").find(".arrowchat_message_controls").addClass("arrowchat_message_controls_display")}),a(".arrowchat_chatroom_msg:not(.arrowchat_global_chatroom_message)").unbind("mouseleave"),a(".arrowchat_chatroom_msg:not(.arrowchat_global_chatroom_message)").mouseleave(function(o){a(o.toElement).hasClass("arrowchat_message_controls")||(h(),a(".arrowchat_message_controls").removeClass("arrowchat_message_controls_display"))}),a(".arrowchat_message_controls").unbind("mouseleave"),a(".arrowchat_message_controls").mouseleave(function(o){a(o.toElement).hasClass("arrowchat_chatroom_msg")||(h(),a(".arrowchat_message_controls").removeClass("arrowchat_message_controls_display"))}),a(".arrowchat_chatroom_reply").unbind("mouseenter").unbind("mouseleave").unbind("click"),a(".arrowchat_chatroom_reply").mouseenter(function(){n(a(this),lang[313],0,10,10),a(this).addClass("arrowchat_chatroom_reply_hover")}),a(".arrowchat_chatroom_reply").mouseleave(function(){h(),a(this).removeClass("arrowchat_chatroom_reply_hover")}),a(".arrowchat_chatroom_reply").click(function(){h(),a(".arrowchat_message_controls").removeClass("arrowchat_message_controls_display");var o=a(this).parents(".arrowchat_tabpopup").attr("data-room-id"),r=a(this).parents(".arrowchat_chatroom_box_message").find(".arrowchat_chatroom_message_avatar").attr("alt");":"==r.charAt(r.length-1)&&(r=r.substring(0,r.length-1));var t="@"+r+" ",e=a(".arrowchat_textarea",i[o]).val();""!=e&&" "!=e.charAt(e.length-1)&&(t=" "+t),a(".arrowchat_textarea",i[o]).focus().val("").val(e+t)}),a(".arrowchat_lightbox").unbind("click"),a(".arrowchat_lightbox").click(function(){a.slimbox(a(this).attr("data-id"),'<a href="'+a(this).attr("data-id")+'">'+lang[70]+"</a>",{resizeDuration:1,overlayFadeDuration:1,imageFadeDuration:1,captionAnimationDuration:1})})}function M(o){a(".arrowchat_chatroom_make_mod").unbind("click"),a(".arrowchat_chatroom_make_mod").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id");a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_mod:o,chatroom_id:r},function(){L()}),K(a(this),o)}),a(".arrowchat_chatroom_remove_mod").unbind("click"),a(".arrowchat_chatroom_remove_mod").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id");a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_remove_mod:o,chatroom_id:r},function(){L()}),K(a(this),o)}),a(".arrowchat_chatroom_block_user").unbind("click"),a(".arrowchat_chatroom_block_user").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id");a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id"),a.post(c_ac_path+"includes/json/send/send_settings.php",{block_chat:o},function(a){"-1"!=a&&(void 0===blockList[o]&&(blockList[o]=o),l(),Y("arrowchat_chatroom_message_flyout",lang[103],"notice"))}),K(a(this),o)}),1!=c_enable_moderation&&a(".arrowchat_chatroom_report_user").parent().hide(),a(".arrowchat_chatroom_report_user").unbind("click"),a(".arrowchat_chatroom_report_user").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id");a.post(c_ac_path+"includes/json/send/send_settings.php",{report_about:o,report_from:u_id,report_chatroom:r},function(a){Y("arrowchat_chatroom_message_flyout",lang[168],"notice")}),K(a(this),o)}),a(".arrowchat_chatroom_ban_user").unbind("click"),a(".arrowchat_chatroom_ban_user").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id"),t=prompt(lang[57]);null==t||""==t||isNaN(t)||a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_ban:o,chatroom_id:r,chatroom_ban_length:t},function(){L()}),K(a(this),o)}),a(".arrowchat_chatroom_silence_user").unbind("click"),a(".arrowchat_chatroom_silence_user").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id"),t=prompt(lang[162]);null==t||""==t||isNaN(t)||a.post(c_ac_path+"includes/json/send/send_settings.php",{chatroom_silence:o,chatroom_id:r,chatroom_silence_length:t},function(){}),K(a(this),o)}),a(".arrowchat_chatroom_private_message").unbind("click"),a(".arrowchat_chatroom_private_message").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id");a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id"),u_id!=o&&(1!=uc_cr_block[o]||1==a_[o]||1==ab[o])&&(K(a(this),o),jqac.arrowchat.chatWith(o))}),a(".arrowchat_chatroom_title").unbind("click"),a(".arrowchat_chatroom_title").click(function(){var o=a(this).parents(".arrowchat_more_wrapper_chatroom").attr("data-user-id");void 0!==uc_link[o]&&window.open(uc_link[o],"_blank")}),a(".arrowchat_chatroom_user").unbind("click"),a(".arrowchat_chatroom_user").click(function(){var o=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id"),r=a(this).attr("data-user-pop-id");a(".arrowchat_chatroom_user").removeClass("arrowchat_chatroom_clicked"),a(".arrowchat_more_popout").removeClass("arrowchat_chatroom_create_flyout_display"),a(this).toggleClass("arrowchat_chatroom_clicked"),a('div[data-user-id="'+r+'"]',i[o]).children(".arrowchat_more_popout").toggleClass("arrowchat_chatroom_create_flyout_display")}),a("body").click(function(o){!a(o.target).closest(".arrowchat_chatroom_user").length&&(a(o.target).closest(".arrowchat_more_popout").length||(a(".arrowchat_chatroom_user").removeClass("arrowchat_chatroom_clicked"),a(".arrowchat_more_popout").removeClass("arrowchat_chatroom_create_flyout_display")))})}function K(o,r){var t=o.parents(".arrowchat_tabpopup").attr("data-room-id");a('div[data-user-pop-id="'+r+'"]',i[t]).toggleClass("arrowchat_chatroom_clicked"),a('div[data-user-id="'+r+'"]',i[t]).children(".arrowchat_more_popout").toggleClass("arrowchat_chatroom_create_flyout_display")}function U(o,r,t,e,s,i){void 0===e&&(e=0);var h="",n="",l="";1==ab[s]&&(h=lang[137],n=" arrowchat_chatroom_important"),1==a_[s]&&(h=lang[137],n=" arrowchat_chatroom_important"),1!=e&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\"/g,"&quot;")),"<div"==(t=m(t=p(t=w(t)))).substr(0,4)&&(l=" arrowchat_image_msg");var u="<div class='arrowchat_pending_icon'></div>";1==e&&(u="<div class='arrowchat_pending_icon arrowchat_pending_delivered'></div>");var v="",g="";0!=i&&(v=" arrowchat_pending_msg",g=" arrowchat_pending_msg_room_"+i);var b=k(new Date(1e3*Math.floor((new Date).getTime()/1e3)),1);if(a("#arrowchat_chatroom_message_"+o).length>0);else{if(0!=o)var _=' id="arrowchat_chatroom_message_'+o+'" ';else var _="";a("#arrowchat_popout_text_room_"+s).append('<div class="arrowchat_chatroom_box_message arrowchat_self'+n+l+v+g+'" '+_+'><div class="arrowchat_chatroom_message_name"><i class="'+h+'"></i>'+r+'</div><div class="arrowchat_chatroom_msg_wrap"><img class="arrowchat_chatroom_message_avatar arrowchat_no_names" src="'+u_avatar+'" alt="'+r+'" /><div class="arrowchat_chatroom_message_content" data-id="'+b+'"><span class="arrowchat_chatroom_msg">'+t+'</span></div><div class="arrowchat_message_controls"><div class="arrowchat_chatroom_reply"><i class="fas fa-reply"></i></div><div class="arrowchat_chatroom_delete" data-id="'+o+'"><i class="far fa-xmark"></i></div></div></div>'+u+"</div>"),a("#arrowchat_popout_text_room_"+s).scrollTop(5e4)}0!=s&&(z(),P(s))}function P(o){1==ab[o]||1==a_[o]?(a(".arrowchat_chatroom_delete",i[o]).show(),a(".arrowchat_chatroom_delete",i[o]).unbind("mouseenter").unbind("mouseleave").unbind("click"),a(".arrowchat_chatroom_delete",i[o]).mouseenter(function(){n(a(this),lang[160],0,10,10),a(this).addClass("arrowchat_chatroom_delete_hover")}),a(".arrowchat_chatroom_delete",i[o]).mouseleave(function(){h(),a(this).removeClass("arrowchat_chatroom_delete_hover")}),a(".arrowchat_chatroom_delete").click(function(){h();var o=a(this).attr("data-id"),r=a(this).parents(".arrowchat_popout_chatroom_convo").attr("data-room-id");a("#arrowchat_chatroom_message_"+o+" .arrowchat_chatroom_delete").remove(),a.post(c_ac_path+"includes/json/send/send_settings.php",{delete_msg:o,chatroom_id:r,delete_name:u_name},function(){a("#arrowchat_chatroom_message_"+o+" .arrowchat_chatroom_msg").html(lang[159]+u_name)})})):a(".arrowchat_chatroom_delete",i[o]).hide()}function V(a,o){1==o?(1==c_push_engine&&(aA[a]=push.subscribe(c_push_encrypt+"_chatroom"+a),aA[a].on("data",function(a){ar(a)})),aj[a]=a):(1==c_push_engine&&void 0!==aA[a]&&aA[a].unsubscribe(),void 0!==aj[a]&&delete aj[a])}function W(){var o=a(".arrowchat_room_name_input").val(),r=a(".arrowchat_room_password_input").val();a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity"),a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"),a(".arrowchat_room_name_input").val(""),a(".arrowchat_room_password_input").val(""),""!=(o=o.replace(/^\s+|\s+$/g,""))&&a.post(c_ac_path+"includes/json/send/send_chatroom_create.php",{userid:u_id,name:o,password:r,description:"",welcome:""},function(o){o&&(a("#arrowchat_create_room_flyout").removeClass("arrowchat_create_room_flyout_display"),a(".arrowchat_room_create").hide(),"-1"==o?Y("arrowchat_chatroom_message_flyout",lang[39],"error"):"-2"==o?Y("arrowchat_chatroom_message_flyout",lang[40],"error"):D())})}function Y(o,r,t){clearTimeout(av),a("#"+o).is(":visible")?a("#"+o).hide("slide",{direction:"up"},250,function(){a("#"+o+" .arrowchat_message_text").html(r),"error"==t&&a(".arrowchat_message_box").addClass("arrowchat_message_box_error").removeClass("arrowchat_message_box_notice"),"notice"==t&&a(".arrowchat_message_box").addClass("arrowchat_message_box_notice").removeClass("arrowchat_message_box_error"),a("#"+o).show("slide",{direction:"up"},250)}):("error"==t&&a(".arrowchat_message_box").addClass("arrowchat_message_box_error").removeClass("arrowchat_message_box_notice"),"notice"==t&&a(".arrowchat_message_box").addClass("arrowchat_message_box_notice").removeClass("arrowchat_message_box_error"),a("#"+o+" .arrowchat_message_text").html(r),a("#"+o).show("slide",{direction:"up"},250)),av=setTimeout(function(){a("#"+o).hide("slide",{direction:"up"},250)},5e3)}function G(a){return a=(a=(a=(a=a.replace(/\\'/g,"'")).replace(/\\"/g,'"')).replace(/\\0/g,"\0")).replace(/\\\\/g,"\\")}function B(o,r,s,i,h,n,v,g){if(0==g&&1==h&&0==v)return!1;if(1!=aD[r]&&x(r,uc_name[r],uc_status[r],uc_avatar[r],uc_link[r],1,1),0==g&&1!=h){var b=[o,r,s,i,h,n];1!=aG&&a8(JSON.stringify(b),"private_message")}if(clearTimeout(ap),document.title=ax,null==uc_name[r]||""==uc_name[r])setTimeout(function(){B(o,r,s,i,h,n,v,g)},500);else{a8(r,"untyping"),Q(r);var _=a("#arrowchat_popout_text_"+r)[0].scrollHeight-a("#arrowchat_popout_text_"+r).scrollTop()-10,y=a("#arrowchat_popout_text_"+r).outerHeight(),$=uc_name[r];if("offline"==uc_status[r]&&1!=h){let T=Math.floor(Date.now()/1e3);T-i<10&&l()}if(f="",1==h){fromname=u_name,fromid=u_id,f=" arrowchat_self",avatar=u_avatar;var E="<div class='arrowchat_pending_icon'></div>";1==v&&(E="<div class='arrowchat_pending_icon arrowchat_pending_delivered'></div>")}else{(function a(o){2!=ak?(document.title=lang[30]+" "+o+"!",ak=2):(document.title=ax,ak=1),!1==aC?ap=setTimeout(function(){a(o)},1e3):(document.title=ax,clearTimeout(ap),setTimeout(function(){a8("body","window_focus")},500))})(uc_name[r]),fromname=$,fromid=r,avatar=uc_avatar[r];var E="";a(".arrowchat_pending_icon",e[r]).hide(),a(".arrowchat_pending_icon:last",e[r]).show()}var F="",H="";0!=g&&(F=" arrowchat_pending_msg",H=" arrowchat_pending_msg_"+g),tooltip=k(new Date(1e3*i),1);var O="",N="";if(s=G(s),1==v&&(s=w(s)),s=p(s),1==v&&(s=m(s)),"<div"==s.substr(0,4)&&(O=" arrowchat_image_msg"),(null==aK[r]||i-aK[r]>180)&&(N=" arrowchat_show_time"),a("#arrowchat_message_"+o).length>0&&0==g)a("#arrowchat_message_"+o+" .arrowchat_chatboxmessagecontent").html(s);else{if(1!=c_show_full_name&&-1!=fromname.indexOf(" ")&&(fromname=fromname.slice(0,fromname.indexOf(" "))),0!=o)var q=' id="arrowchat_message_'+o+'" ';else var q="";var D=C(fromname);a(".arrowchat_popout_convo",e[r]).append('<div class="arrowchat_chatboxmessage arrowchat_clearfix'+f+O+N+F+H+'" '+q+">"+k(new Date(1e3*i))+'<div class="arrowchat_chatboxmessagefrom arrowchat_white_background" style="background-color:'+D.color+'"><span class="arrowchat_tab_letter arrowchat_tab_letter_xsmall">'+D.character+'</span><img alt="'+fromname+'" class="arrowchat_chatbox_avatar" src="'+avatar+'" /></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="'+tooltip+'">'+s+"</div></div>"+E+"</div>"),a("#arrowchat_message_"+aM[r]).length&&1!=h&&a("#arrowchat_message_"+aM[r]).children(".arrowchat_chatboxmessagefrom").addClass("arrowchat_single_avatar_hide"),aK[r]=i,aU[r]=fromid,0==g&&(aM[r]=o),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1)}_<=y||!t[r].hasClass("arrowchat_popout_focused")?(a("#arrowchat_popout_text_"+r).scrollTop(5e4),a(".arrowchat_chatboxmessagecontent>div>img,.arrowchat_emoji_text>img").one("load",function(){setTimeout(function(){a("#arrowchat_popout_text_"+r).scrollTop(5e4)},500)}).each(function(){this.complete&&a(this).trigger("load")})):Y("arrowchat_chatroom_message_flyout",lang[134],"notice"),function o(r,e){if(null==uc_name[r]||""==uc_name[r])setTimeout(function(){o(r,e)},500);else if(t[r].length>0){if(t[r].hasClass("arrowchat_popout_focused"))return!1;a(".arrowchat_popout_alert",t[r]).length>0&&(e=parseInt(a(".arrowchat_popout_alert",t[r]).html())+parseInt(e)),0==e?a(".arrowchat_popout_alert",t[r]).remove():a(".arrowchat_popout_alert",t[r]).length>0?a(".arrowchat_popout_alert",t[r]).html(e):a("<div/>").addClass("arrowchat_popout_alert").html(e).insertAfter(a(".arrowchat_popout_wrap .arrowchat_closed_status",t[r])),aN[r]=e,u()}}(r,1)}}function J(o){if(a("#arrowchat_popout_text_"+o).length){var r=a("#arrowchat_popout_text_"+o)[0].scrollHeight-a("#arrowchat_popout_text_"+o).scrollTop()-10,e=a("#arrowchat_popout_text_"+o).outerHeight();a(".arrowchat_closed_status",t[o]).addClass("arrowchat_typing"),a(".arrowchat_is_typing",t[o]).show(),a("#arrowchat_popout_text_"+o+" #arrowchat_typing_message_"+o).length&&a("#arrowchat_popout_text_"+o+" #arrowchat_typing_message_"+o).remove();var s=C(uc_name[o]);a("#arrowchat_popout_text_"+o).append('<div class="arrowchat_chatboxmessage arrowchat_clearfix" id="arrowchat_typing_message_'+o+'"><div class="arrowchat_chatboxmessagefrom arrowchat_white_background" style="background-color:'+s.color+'"><span class="arrowchat_tab_letter arrowchat_tab_letter_xsmall">'+s.character+'</span><img alt="" class="arrowchat_chatbox_avatar" src="'+uc_avatar[o]+'" /></div><div class="arrowchat_chatboxmessage_wrapper"><div class="arrowchat_chatboxmessagecontent" data-id="Typing"><div class="arrowchat_is_typing arrowchat_is_typing_chat"><div class="arrowchat_typing_bubble"></div><div class="arrowchat_typing_bubble"></div><div class="arrowchat_typing_bubble"></div></div></div></div></div>'),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1),(r<=e||!t[o].hasClass("arrowchat_popout_focused"))&&a("#arrowchat_popout_text_"+o).scrollTop(5e4),clearTimeout(ad),ad=setTimeout(function(){a8(o,"untyping"),Q(o)},3e4)}}function Q(o){a("#arrowchat_popout_text_"+o).length&&(clearTimeout(ad),a("#arrowchat_typing_message_"+o).length&&a("#arrowchat_typing_message_"+o).remove(),a(".arrowchat_closed_status",t[o]).removeClass("arrowchat_typing"),a(".arrowchat_is_typing",t[o]).hide())}function R(r){0==r.read&&""!=r.data?(a("#arrowchat_warnings").remove(),a("#arrowchat_warning_background").remove(),o.append('<div id="arrowchat_warning_background"></div><div id="arrowchat_warnings"><div class="arrowchat_warnings_content"><div class="arrowchat_warning_icon"><i class="fad fa-triangle-exclamation"></i></div><div class="arrowchat_warning_message">'+lang[199]+'</div><div class="arrowchat_warning_reason">'+r.data+'</div><div class="arrowchat_warnings_close_div"><div class="arrowchat_warnings_close arrowchat_ui_button"><div><i class="fa-regular fa-user-check"></i>'+lang[198]+"</div></div></div></div></div>"),a("#arrowchat_warnings .arrowchat_warnings_close").click(function(){a("#arrowchat_warnings").remove(),a("#arrowchat_warning_background").remove(),a.post(c_ac_path+"includes/json/send/send_settings.php",{warning_read:1},function(){})})):(a("#arrowchat_warnings").remove(),a("#arrowchat_warning_background").remove())}function X(o,r){if(void 0!==s[r]){if(s[r].hasClass("arrowchat_popout_focused"))return!1;a(".arrowchat_popout_alert",s[r]).length>0&&(o=parseInt(a(".arrowchat_popout_alert",s[r]).html())+parseInt(o)),0==o?(s[r].removeClass("arrowchat_tab_new_message"),a(".arrowchat_popout_alert",s[r]).remove()):(a(".arrowchat_popout_alert",s[r]).length>0?a(".arrowchat_popout_alert",s[r]).html(o):a("<div/>").addClass("arrowchat_popout_alert").html(o).prependTo(a(".arrowchat_popout_wrap",s[r])),s[r].removeClass("arrowchat_tab_new_message").addClass("arrowchat_tab_new_message")),v()}}function Z(o,r,t,e,s,i,h,n,l){e==u_id&&(uc_avatar[u_id]=u_avatar),t=p(t=G(t));var w=new Date(1e3*s);void 0===uc_avatar[e]?a.ajax({url:c_ac_path+"includes/json/receive/receive_user.php",data:{userid:e},type:"post",cache:!1,dataType:"json",success:function(a){a&&(uc_avatar[e]=a.a,aa(o,uc_avatar[e],r,w,t,i,h,n,e,l))}}):aa(o,uc_avatar[e],r,w,t,i,h,n,e,l),ay++}function aa(o,r,t,e,s,h,n,l,p,w){if(p==u_id&&0==h)return!1;var m=a("#arrowchat_popout_text_room_"+w)[0].scrollHeight-a("#arrowchat_popout_text_room_"+w).scrollTop()-10,u=a("#arrowchat_popout_text_room_"+w).outerHeight(),v="",g="",b="",_="";p==u_id&&(g="arrowchat_self"),1==n&&(v=lang[137],b="arrowchat_chatroom_important"),1==l&&(v=lang[137],b="arrowchat_chatroom_important"),"<div"==s.substr(0,4)&&(_=" arrowchat_image_msg"),a(".arrowchat_pending_icon",i[w]).hide(),a(".arrowchat_chatroom_box_message .arrowchat_pending_icon:last",i[w]).show();var y=RegExp("(^|\\s)(@"+u_name+")(\\s|$)","i");if(s=s.replace(y,'$1<span class="arrowchat_at_user">$2</span>$3'),a("#arrowchat_chatroom_message_"+o).length>0)a("#arrowchat_chatroom_message_"+o+" .arrowchat_chatboxmessagecontent").html(s),p==u_id&&a("#arrowchat_chatroom_message_"+o).addClass(g);else{var $=k(e,1);if(1==h)a("<div/>").attr("id","arrowchat_chatroom_message_"+o).addClass("arrowchat_chatroom_box_message").addClass("arrowchat_global_chatroom_message").html('<div class="arrowchat_chatroom_message_content">'+k(e)+s+"</div>").appendTo("#arrowchat_popout_text_room_"+w),L();else{var x=C(t);a("<div/>").attr("id","arrowchat_chatroom_message_"+o).addClass(b).addClass(_).addClass(g).addClass("arrowchat_chatboxmessage").addClass("arrowchat_popout_room_msg").html('<div class="arrowchat_chatroom_message_name"><i class="'+v+'"></i>'+t+'</div><div class="arrowchat_chatroom_msg_wrap"><div class="arrowchat_chatbox_avatar_wrapper arrowchat_white_background" style="background-color:'+x.color+'"><img class="arrowchat_chatroom_message_avatar arrowchat_no_names" src="'+r+'" alt="'+t+'" /><span class="arrowchat_tab_letter arrowchat_tab_letter_xsmall">'+x.character+'</span></div><div class="arrowchat_chatroom_message_content" data-id="'+$+'"><span class="arrowchat_chatroom_msg">'+s+'</span></div><div class="arrowchat_message_controls"><div class="arrowchat_chatroom_reply"><i class="fas fa-reply"></i></div><div class="arrowchat_chatroom_delete" data-id="'+o+'"><i class="far fa-xmark"></i></div></div></div>').appendTo("#arrowchat_popout_text_room_"+w)}(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&ac(1),m<=u?(a("#arrowchat_popout_text_room_"+w).scrollTop(5e4),a(".arrowchat_image_msg img,.arrowchat_emoji_text>img").one("load",function(){setTimeout(function(){a("#arrowchat_popout_text_room_"+w).scrollTop(5e4)},500)}).each(function(){this.complete&&a(this).trigger("load")})):Y("arrowchat_chatroom_message_flyout",lang[134],"notice"),z(),P(w)}}function ao(r){0==r.read&&""!=r.data?(a("#arrowchat_announcement").remove(),o.append('<div id="arrowchat_announcement"><div class="arrowchat_announcement_content">'+r.data+'<div class="arrowchat_announce_close_div"><div class="arrowchat_announce_close arrowchat_ui_button"><i class="fa-regular fa-xmark"></i>'+lang[28]+'</div></div></div><div class="arrowchat_announcement_tip_pos"></div></div>'),a("#arrowchat_announcement .arrowchat_announce_close").click(function(){a("#arrowchat_announcement").remove(),a.post(c_ac_path+"includes/json/send/send_settings.php",{announce:1},function(){})})):a("#arrowchat_announcement").remove()}function ar(o){"announcement"in o&&ao(o.announcement),"typing"in o&&(a8(o.typing.id,"typing"),J(o.typing.id)),"warning"in o&&R(o.warning),"nottyping"in o&&(a8(o.nottyping.id,"untyping"),Q(o.nottyping.id)),"messages"in o&&(B(o.messages.id,o.messages.from,o.messages.message,o.messages.sent,o.messages.self,o.messages.old,0,0),1==o.messages.self||1!=u_sounds||a(".arrowchat_textarea").is(":focus")||$(),_(),a5=1,a7=aE),"chatroommessage"in o&&void 0===blockList[o.chatroommessage.userid]&&(Z(o.chatroommessage.id,o.chatroommessage.name,o.chatroommessage.message,o.chatroommessage.userid,o.chatroommessage.sent,o.chatroommessage.global,o.chatroommessage.mod,o.chatroommessage.admin,o.chatroommessage.chatroomid),"Delete"!=o.chatroommessage.name&&1!=o.chatroommessage.global)&&(X(1,o.chatroommessage.chatroomid),a8(JSON.stringify([1,o.chatroommessage.chatroomid]),"chatroom_alerts"),o.chatroommessage.userid!=u_id&&(1!=u_chatroom_sound||a(".arrowchat_textarea").is(":focus")||$())),"chatroomban"in o&&(a(".arrowchat_closebox_bottom",s[o.chatroomban.id]).click(),Y("arrowchat_chatroom_message_flyout",o.chatroomban.error2,"error"))}function at(o){var r=a("<div/>").attr("id","arrowchat_render").html(o).appendTo("body"),t=a("#arrowchat_render").html();return r.remove(),t}function ae(o,r){o.each(function(o,t){a(t).hover(function(){a(this).addClass(r)},function(){a(this).removeClass(r)})})}function ac(o){1==o?(a(".arrowchat_popout_tab[data-id] .arrowchat_avatar_tab").addClass("arrowchat_hide_avatars"),a(".arrowchat_popout_convo_wrapper[data-id] .arrowchat_avatarbox img").addClass("arrowchat_hide_avatars"),a(".arrowchat_popout_convo_wrapper[data-id] .arrowchat_info_avatar img").addClass("arrowchat_hide_avatars"),a(".arrowchat_popout_settings_button img").addClass("arrowchat_hide_avatars"),a(".arrowchat_tab_letter").css("display","flex"),a(".arrowchat_userlist .arrowchat_userlist_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_flyout_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_message_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_chatbox_avatar").addClass("arrowchat_hide_avatars"),a(".arrowchat_popout_settings_button").removeClass("arrowchat_white_background"),a(".arrowchat_chatboxmessagefrom").removeClass("arrowchat_white_background"),a(".arrowchat_avatarbox").removeClass("arrowchat_white_background"),a(".arrowchat_info_avatar").removeClass("arrowchat_white_background"),a(".arrowchat_avatartab").removeClass("arrowchat_white_background"),a(".arrowchat_chatbox_avatar_wrapper").removeClass("arrowchat_white_background"),a(".arrowchat_disable_avatars_name").show(),a(".arrowchat_chatboxmessage_wrapper").addClass("arrowchat_chatboxmessage_wrapper2"),a(".arrowchat_chatboxmessagecontent").addClass("arrowchat_chatboxmessagecontent2"),a(".arrowchat_userlist").addClass("arrowchat_userslist_no_avatars")):(a(".arrowchat_popout_tab[data-id] .arrowchat_avatar_tab").removeClass("arrowchat_hide_avatars"),a(".arrowchat_popout_convo_wrapper[data-id] .arrowchat_avatarbox img").removeClass("arrowchat_hide_avatars"),a(".arrowchat_popout_convo_wrapper[data-id] .arrowchat_info_avatar img").removeClass("arrowchat_hide_avatars"),a(".arrowchat_popout_settings_button img").removeClass("arrowchat_hide_avatars"),a(".arrowchat_tab_letter").hide(),a(".arrowchat_userlist .arrowchat_userlist_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_flyout_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_chatroom_message_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_chatbox_avatar").removeClass("arrowchat_hide_avatars"),a(".arrowchat_popout_settings_button").addClass("arrowchat_white_background"),a(".arrowchat_chatboxmessagefrom").addClass("arrowchat_white_background"),a(".arrowchat_avatarbox").addClass("arrowchat_white_background"),a(".arrowchat_info_avatar").addClass("arrowchat_white_background"),a(".arrowchat_avatartab").addClass("arrowchat_white_background"),a(".arrowchat_chatbox_avatar_wrapper").addClass("arrowchat_white_background"),a(".arrowchat_disable_avatars_name").hide(),a(".arrowchat_chatboxmessage_wrapper").removeClass("arrowchat_chatboxmessage_wrapper2"),a(".arrowchat_chatboxmessagecontent").removeClass("arrowchat_chatboxmessagecontent2"),a(".arrowchat_userlist").removeClass("arrowchat_userslist_no_avatars"))}function as(o){a.post(c_ac_path+"includes/json/send/send_status.php",{userid:u_id,status:o},function(){})}function a8(a,o,r){if(0==ag){var t=new Date().getTime();"private_message"==o||"chatroom_message"==o||"chatroom_alerts"==o||"send_chatroom_message"==o?ai()||localStorage.setItem(o,a+"/##-"+t):ai()||(void 0===r?localStorage.setItem(o,a+"/"+t):localStorage.setItem(o,a+","+r+"/"+t))}}function ai(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}function ah(o){if(ag=1,"window_focus"==o.key&&(clearTimeout(ap),document.title=ax),"private_message"==o.key){var r=o.newValue.split("/##-"),t=JSON.parse(r[0]);B(t[0],t[1],t[2],t[3],t[4],1,1,0)}if("send_chatroom_message"==o.key){var r=o.newValue.split("/##-"),t=JSON.parse(r[0]);U(t[0],t[1],t[2],1,t[3],0),a("#arrowchat_popout_text_room_"+t[3]).scrollTop(5e4),a(".arrowchat_chatboxmessagecontent>div>img,.arrowchat_emoji_text>img").one("load",function(){a("#arrowchat_popout_text_room_"+t[3]).scrollTop(5e4)}).each(function(){this.complete&&a(this).trigger("load")})}if(1!=c_push_engine){if("untyping"==o.key){var r=o.newValue.split("/");Q(r[0])}if("typing"==o.key){var r=o.newValue.split("/");J(r[0])}if("chatroom_message"==o.key){var r=o.newValue.split("/##-"),t=JSON.parse(r[0]),e=t[8];"cr-"==e.substring(0,3)&&(e=e.substr(3)),Z(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],e)}if("chatroom_alerts"==o.key){var r=o.newValue.split("/##-"),t=JSON.parse(r[0]),e=t[1];"cr-"==e.substring(0,3)&&(e=e.substr(3)),X(t[0],e)}}ag=0}RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var an,al,ad,ap,aw,am,au,av,af=1,ag=0,ab={},a_={},ay=0,a$={},ax=document.title,ak=1,aC=!0,aj={},a0=0,a1=0,a3=0,aT=0,a2=0,a4=!1,aE=3e3,a6=-1,a7=aE,a5=1,aF=0,aH=0,aO=0,aN={},aq={},aD={},a9={},aI={},aS={},aA={},aL=[],az=[],aM={},aK={},aU={},aP={},aV={},aW=new Date,aY=aW.getDate(),aG=(aW.getTime(),1),aB=-1,aJ="Powered By <a href='http://www.arrowchat.com/' target='_blank'>ArrowChat</a>",aQ=0,aR=[];aR[0]=[":)","&#x1F642;"],aR[1]=[":-)","&#x1F642;"],aR[2]=["=)","&#x1F642;"],aR[3]=[":p","&#x1F61B;"],aR[4]=[":o","&#x1F62E;"],aR[5]=[":|","&#x1F610;"],aR[6]=[":(","&#x2639;&#xFE0F;"],aR[7]=["=(","&#x2639;&#xFE0F;"],aR[8]=[":D","&#x1F603;"],aR[9]=["=D","&#x1F603;"],aR[10]=[":/","&#x1F615;"],aR[11]=["=/","&#x1F615;"],aR[12]=[";)","&#x1F609;"],aR[13]=[":'(","&#x1F622;"],aR[14]=["<3","&#x2764;&#xFE0F;"],aR[15]=[">:(","&#x1F621;"];var aX,aZ="";for(d=0;d<Themes.length;d++)aX=Themes[d][2]==u_theme?"selected":"",aZ=aZ+'<option value="'+Themes[d][0]+'" '+aX+">"+Themes[d][1]+"</option>";arguments.callee.videoWith=function(a){if(4==c_video_select)var o=window.open("https://meet.jit.si/"+a,"audiovideochat","status=no,toolbar=no,menubar=no,directories=no,resizable=no,location=no,scrollbars=no,width="+c_video_width+",height="+c_video_height);else if(1==c_video_select)var o=window.open("https://meet.jit.si/"+a,"audiovideochat","status=no,toolbar=no,menubar=no,directories=no,resizable=no,location=no,scrollbars=no,width="+c_video_width+",height="+c_video_height);else var o=window.open(c_ac_path+"public/video/?rid="+a,"audiovideochat","status=no,toolbar=no,menubar=no,directories=no,resizable=no,location=no,scrollbars=no,width="+c_video_width+",height="+c_video_height);o.focus()},a.ajaxSetup({scriptCharset:"utf-8",cache:!1}),arguments.callee.runarrowchat=function(){!function o(){if(a.ajax({url:c_ac_path+"includes/json/receive/receive_init.php",cache:!1,type:"get",dataType:"json",success:function(a){}}),Modernizr.emoji||(c_disable_smilies=1),window.addEventListener("storage",ah,!1),0!=c_chat_maintenance||1==c_db_connection||""==u_id||1==c_disable_arrowchat){r=lang[58],t="",0!=c_chat_maintenance||1==c_db_connection||1==c_disable_arrowchat?r=1==c_db_connection?"We could not connect to the database. Please try again later.":lang[27]:""!=c_login_url&&(t='<div class="arrowchat_login_button_wrapper"><a class="arrowchat_login_button" href="'+c_login_url+'">'+lang[239]+"</a></div>"),a("#arrowchat_popout_wrapper").html('<div style="text-align:center;padding-top:10px;font-size:16px">'+r+"</div>"+t)}else{if(1==c_push_engine&&(push=new Scaledrone(c_push_publish)),1==c_push_engine&&1==c_push_engine&&(am=push.subscribe(c_push_encrypt+"_u"+u_id),(au=push.subscribe(c_push_encrypt+"_arrowchat")).on("data",function(a){ar(a)}),am.on("data",function(a){ar(a)})),a("#arrowchat_popout_left_lists").html(""),a('<div class="arrowchat_loading_icon"></div>').appendTo("#arrowchat_popout_friends"),l(),a("#arrowchat_password_cancel_button").click(function(){a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity"),a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"),a("#arrowchat_chatroom_password_flyout").hide("slide",{direction:"up"},250)}),a("#arrowchat_password_button").click(function(){c=a("#arrowchat_chatroom_password_id").val(),a("#arrowchat_chatroom_password_flyout").hide(),a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity"),a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"),input_value=a("#arrowchat_chatroom_password_input").val(),a("#arrowchat_chatroom_password_input").val(""),input_value=input_value.replace(/^\s+|\s+$/g,""),S(c,cr_type[c],input_value)}),a("body").click(function(o){a(o.target).closest("#arrowchat_chatroom_password_flyout").length||a(o.target).closest(".arrowchat_chatroom_list").length||(a("#arrowchat_chatroom_password_flyout").hide(),a("#arrowchat_popout_wrapper").removeClass("arrowchat_chatroom_opacity"),a(".arrowchat_chatroom_list").removeClass("arrowchat_chatroom_clicked"))}),1==c_user_chatrooms&&(a("#arrowchat_room_selection").mouseenter(function(){a(".arrowchat_room_create").show()}),a("#arrowchat_room_selection").mouseleave(function(){a("#arrowchat_create_room_flyout").hasClass("arrowchat_create_room_flyout_display")||a(".arrowchat_room_create").hide()}),a(".arrowchat_room_create").mouseenter(function(){n(a(this),lang[93],0,10,5),a(this).addClass("arrowchat_room_create_hover")}).children().mouseenter(function(){return!1}),a(".arrowchat_room_create").mouseleave(function(){h(),a(this).removeClass("arrowchat_room_create_hover")}).children().mouseleave(function(){return!1}),a(".arrowchat_room_create").click(function(){h(),a("#arrowchat_create_room_flyout").toggleClass("arrowchat_create_room_flyout_display"),a(this).toggleClass("arrowchat_room_create_selected"),a(".arrowchat_create_input").focus()}).children().click(function(){return!1}),a("body").click(function(o){a(o.target).closest(".arrowchat_room_create").length||a("#arrowchat_create_room_flyout").removeClass("arrowchat_create_room_flyout_display")}),a(".arrowchat_create_password_wrapper").click(function(){a(".arrowchat_password_input_wrapper").show(),a(this).hide(),a(".arrowchat_room_password_input").focus()}),a(".arrowchat_room_name_input").keydown(function(a){13==a.keyCode&&W()}),a("#arrowchat_create_room_button").click(function(){W()}),a(".arrowchat_room_password_input").placeholder(),a(".arrowchat_room_name_input").placeholder()),a("#arrowchat_room_selection").click(function(){a(this).hasClass("arrowchat_selection_tab_selected")||(a("#arrowchat_user_selection").removeClass("arrowchat_selection_tab_selected"),a(this).addClass("arrowchat_selection_tab_selected"),D())}),a("#arrowchat_user_selection").click(function(){a(this).hasClass("arrowchat_selection_tab_selected")||(a(".arrowchat_search_friends_input").val(""),a("#arrowchat_room_selection").removeClass("arrowchat_selection_tab_selected"),a(this).addClass("arrowchat_selection_tab_selected"),a("#arrowchat_popout_left_lists").html(""),a('<div class="arrowchat_loading_icon"></div>').appendTo("#arrowchat_popout_friends"),l())}),a(".arrowchat_search_friends_input").keydown(function(){a("#arrowchat_user_selection").click()}),a(".arrowchat_search_friends_input").placeholder(),a(".arrowchat_search_friends_input").keyup(function(){void 0!==al&&al.abort(),a(".arrowchat_search_not_found").remove(),a("#arrowchat_popout_left_lists").children("div").not(".arrowchat_userslist_offline").hide(),clearTimeout(aw);var o=0,r="",t="",e=a(this).val();e.length<2?(a(".arrowchat_search_not_found").remove(),a("#arrowchat_popout_left_lists").children("div").not("#arrowchat_userslist_offline").show(),2==af&&l(),af=1):(a(".arrowchat_nofriends").remove(),a("<div/>").attr("class","arrowchat_search_not_found arrowchat_nofriends").html('<div class="arrowchat_loading_icon"></div>').prependTo("#arrowchat_popout_left_lists"),af=2,a("#arrowchat_setting_names_only :input").is(":checked")&&(t="arrowchat_hide_avatars"),al=a.ajax({url:c_ac_path+"includes/json/receive/receive_search.php",type:"post",cache:!1,dataType:"json",data:{search_name:e},success:function(e){e&&null!=e&&(a.each(e,function(e,s){a.each(s,function(e,s){if(void 0!==uc_avatar[s.id])var i=uc_avatar[s.id];else var i=s.avatar;var h=" fas fa-circle";"away"==s.status?h=" fas fa-moon":"busy"==s.status&&(h=" far fa-mobile-screen"),(1==c_disable_avatars||a("#arrowchat_setting_names_only :input").is(":checked"))&&(t="arrowchat_hide_avatars"),r+='<div id="arrowchat_userlist_'+s.id+'" class="arrowchat_userlist" onmouseover="jqac(this).addClass(\'arrowchat_userlist_hover\');" onmouseout="jqac(this).removeClass(\'arrowchat_userlist_hover\');"><img class="arrowchat_userlist_avatar '+t+'" src="'+i+'" /><span class="arrowchat_userscontentname">'+s.name+'</span><span class="arrowchat_userscontentdot arrowchat_'+s.status+h+'"></span></div>',o++})}),0==o?a(".arrowchat_search_not_found").html(lang[26]):(a(".arrowchat_search_not_found").remove(),a("#arrowchat_userslist_available").show().html(r),a(".arrowchat_userlist").click(function(){var o=a(this).attr("id").substr(19);x(o,uc_name[o],uc_status[o],uc_avatar[o],uc_link[o])})))}}))}),function o(){1==u_sounds?a("#arrowchat_setting_sound :input").prop("checked",!0):(a("#arrowchat_setting_sound").addClass("arrowchat_menu_unchecked"),a("#arrowchat_setting_sound :input").prop("checked",!1)),1==u_no_avatars?a("#arrowchat_setting_names_only :input").prop("checked",!0):(a("#arrowchat_setting_names_only").addClass("arrowchat_menu_unchecked"),a("#arrowchat_setting_names_only :input").prop("checked",!1)),1==u_chatroom_block_chats?a("#arrowchat_chatroom_block :input").prop("checked",!0):(a("#arrowchat_chatroom_block").addClass("arrowchat_menu_unchecked"),a("#arrowchat_chatroom_block :input").prop("checked",!1)),1==u_chatroom_show_names?a("#arrowchat_chatroom_show_names :input").prop("checked",!0):(a("#arrowchat_chatroom_show_names").addClass("arrowchat_menu_unchecked"),a("#arrowchat_chatroom_show_names :input").prop("checked",!1));var r=C(u_name);if(a(".arrowchat_popout_settings_button").css("background-color",r.color),a(".arrowchat_tab_letter_psmall").html(r.character),a("#arrowchat_popout_settings").click(function(){a("#arrowchat_options_flyout").toggleClass("arrowchat_options_flyout_display"),a("#arrowchat_options_flyout").children(".arrowchat_inner_menu").show(),a(".arrowchat_block_menu").hide(),a(".arrowchat_change_name_menu").hide()}).children().not(".arrowchat_popout_settings_button").click(function(){return!1}),a(".arrowchat_popout_settings_button").mouseover(function(){a(this).addClass("arrowchat_popout_settings_button_hover")}),a(".arrowchat_popout_settings_button").mouseleave(function(){a(this).removeClass("arrowchat_popout_settings_button_hover")}),a("body").click(function(o){!a(o.target).closest("#arrowchat_popout_settings").length&&(a(o.target).closest("#arrowchat_options_flyout").length||a("#arrowchat_options_flyout").removeClass("arrowchat_options_flyout_display"))}),a("#arrowchat_setting_sound").click(function(){a(this).toggleClass("arrowchat_menu_unchecked"),a("#arrowchat_setting_sound :input").is(":checked")?(a("#arrowchat_setting_sound :input").prop("checked",!1),_soundcheck=-1,u_sounds=0):(a("#arrowchat_setting_sound :input").prop("checked",!0),_soundcheck=1,u_sounds=1),a.post(c_ac_path+"includes/json/send/send_settings.php",{sound:_soundcheck},function(){})}),a("#arrowchat_setting_names_only").click(function(){a(this).toggleClass("arrowchat_menu_unchecked"),a("#arrowchat_setting_names_only :input").is(":checked")?(a("#arrowchat_setting_names_only :input").prop("checked",!1),ac(0),_namecheck=-1):(a("#arrowchat_setting_names_only :input").prop("checked",!0),ac(1),_namecheck=1),a.post(c_ac_path+"includes/json/send/send_settings.php",{name:_namecheck},function(){})}),1==u_is_guest&&1==c_guest_name_change&&""==u_guest_name){function t(){var o=a(".arrowchat_guest_name_input").val();a.post(c_ac_path+"includes/json/send/send_settings.php",{chat_name:o},function(r){"1"!=r?r==lang[123]?(Y("arrowchat_chatroom_message_flyout",r,"error"),a(".arrowchat_enter_name_wrapper").fadeOut("fast")):Y("arrowchat_chatroom_message_flyout",r,"error"):(a(".arrowchat_enter_name_wrapper").fadeOut("fast"),u_name=o)})}a(".arrowchat_enter_name_wrapper").show(),a(".arrowchat_guest_name_input").keydown(function(a){13==a.keyCode&&t()}),a("#arrowchat_guest_name_button").click(function(){t()})}a("#arrowchat_setting_block_list").click(function(){a(this).parent().parent(".arrowchat_inner_menu").hide(),a(".arrowchat_block_menu").show(),a.ajax({url:c_ac_path+"includes/json/receive/receive_block_list.php",type:"get",cache:!1,dataType:"json",success:function(o){o&&null!=o&&(a(".arrowchat_block_menu select").html(""),a("<option/>").attr("value","0").html(lang[118]).appendTo(a(".arrowchat_block_menu select")),a.each(o,function(o,r){a.each(r,function(o,r){a("<option/>").attr("value",r.id).html(r.username).appendTo(a(".arrowchat_block_menu select"))})}))}})}),a("#arrowchat_block_back").click(function(){a("#arrowchat_options_flyout .arrowchat_inner_menu").show(),a(".arrowchat_block_menu").hide()}),a("#arrowchat_unblock_button").click(function(){a("#arrowchat_popout_settings").click();var o=a(".arrowchat_block_menu select").val();"0"!=o&&a.post(c_ac_path+"includes/json/send/send_settings.php",{unblock_chat:o},function(){void 0!==blockList[o]&&blockList.splice(o,1),l()})}),ae(a(".arrowchat_menu_item"),"arrowchat_more_hover"),(1==a.cookie("arrowchat_hide_lists")||1==ac_autohide_panel)&&(a(".arrowchat_popout_hide_lists").show(),a("#arrowchat_popout_wrapper").addClass("arrowchat_lists_hidden")),a(".arrowchat_popout_hide_lists").mouseenter(function(){a(this).addClass("arrowchat_popout_info_hover")}),a(".arrowchat_popout_hide_lists").mouseleave(function(){a(this).removeClass("arrowchat_popout_info_hover")}),a("#arrowchat_hide_lists_button").click(function(){a.cookie("arrowchat_hide_lists",1,{expires:365,path:"/"}),a("#arrowchat_popout_settings").click(),a(".arrowchat_popout_hide_lists").show(),a("#arrowchat_popout_wrapper").addClass("arrowchat_lists_hidden")}),a(".arrowchat_popout_hide_lists").click(function(){a.cookie("arrowchat_hide_lists",0,{expires:365,path:"/"}),a(".arrowchat_popout_hide_lists").hide(),a("#arrowchat_popout_wrapper").removeClass("arrowchat_lists_hidden")})}(),a("#arrowchat_options_flyout .arrowchat_inner_menu").append('<li class="arrowchat_menu_separator"></li><li id="arrowchat_popout_powered_by">'+aJ+"</li>"),1==u_is_mod&&1==c_enable_moderation&&function o(){if(a("#arrowchat_setting_mod_cp").show(),a("#arrowchat_setting_mod_cp").click(function(){window.open(c_ac_path+"mod/","_blank","");var o=parseInt(a(".arrowchat_mobiletab_new_count").html()),r=parseInt(a("#arrowchat_more_notification").html());o-r<=0&&a("#arrowchat_mobiletab_new").hide(),a(".arrowchat_mobiletab_new_count").html(parseInt(o-r)),a("#arrowchat_more_notification_modcp").hide(),a("#arrowchat_more_notification").hide()}),u_num_mod_reports>0){var r=parseInt(a(".arrowchat_mobiletab_new_count").html())+parseInt(u_num_mod_reports);a(".arrowchat_mobiletab_new_count").html(r),a("#arrowchat_mobiletab_new").show(),a("#arrowchat_more_notification").show().html(u_num_mod_reports),a("#arrowchat_more_notification_modcp").show().html(u_num_mod_reports)}}(),1!=c_chatrooms)a("#arrowchat_chat_selection_tabs").remove(),a("#arrowchat_popout_left_lists").css("top","101px");else{if(ac_load_chatroom_id>0){e=ac_load_chatroom_id,a.ajax({url:c_ac_path+"includes/json/receive/receive_chatroom_list.php",cache:!1,type:"post",dataType:"json",success:function(o){o&&a.each(o,function(o,r){"chatrooms"==o&&a.each(r,function(a,o){cr_name[o.id]=o.n,cr_desc[o.id]=o.d,cr_welcome[o.id]=o.welcome,cr_img[o.id]=o.img,cr_type[o.id]=o.t,cr_count[o.id]=o.c,cr_other[o.id]=o.o})}),V(e,1),ac_load_chatroom_id>0?2==cr_type[e]?(a("#arrowchat_chatroom_password_id").val(e),a("#arrowchat_chatroom_password_flyout").show("slide",{direction:"up"},250,function(){a("#arrowchat_chatroom_password_input").focus()}),a("#arrowchat_popout_wrapper").addClass("arrowchat_chatroom_opacity")):(aV[e]=0,I(e,1)):(L(),I(e,1))}})}(ac_select_chatroom>0||0==c_online_list)&&a("#arrowchat_room_selection").click(),0==c_online_list&&(a("#arrowchat_user_selection").css("visibility","hidden"),a("#arrowchat_room_selection").addClass("arrowchat_selection_tab_selected"))}v(),a(window).bind("resize",v),a("#arrowchat_popout_left_lists").perfectScrollbar();for(var r,t,e,s=!1,i=focus_chat.length-1;i>=0;i--)focus_chat[i],"1"==focus_is_room[i]?0!=c_chatrooms&&ac_load_chatroom_id!=focus_chat[i]&&(aV[focus_chat[i]]=0,V(focus_chat[i],1),i==focus_chat.length-1?I(focus_chat[i],1):I(focus_chat[i],0),s=!0):(aP[focus_chat[i]]=0,i==focus_chat.length-1?x(focus_chat[i],uc_name[focus_chat[i]],uc_status[focus_chat[i]],uc_avatar[focus_chat[i]],uc_link[focus_chat[i]],"0"):x(focus_chat[i],uc_name[focus_chat[i]],uc_status[focus_chat[i]],uc_avatar[focus_chat[i]],uc_link[focus_chat[i]],"1"));for(var i=0;i<unfocus_chat.length;i++)unfocus_chat[i],"1"==unfocus_is_room[i]?0!=c_chatrooms&&ac_load_chatroom_id!=unfocus_chat[i]&&(V(unfocus_chat[i],1),I(unfocus_chat[i],0),s=!0):x(unfocus_chat[i],uc_name[unfocus_chat[i]],uc_status[unfocus_chat[i]],uc_avatar[unfocus_chat[i]],uc_link[unfocus_chat[i]],"1");if(s&&L(),b(),a(document).bind("idle.idleTimer",function(){as("away"),a2=1}),a(document).bind("active.idleTimer",function(){as("available"),a2=0}),window.onblur=function(){aC=!1},window.onfocus=function(){aC=!0},a.idleTimer(6e4*c_idle_time),ion.sound({sounds:[{name:"new_message"}],volume:1,path:c_ac_path+"themes/"+u_theme+"/sounds/",preload:!0}),a("#arrowchat_popout_powered_by").each(function(){this.style.setProperty("display","block","important")}),-1==aJ.search(/arrowchat/i)||!a("#arrowchat_popout_powered_by")[0]||""==a("#arrowchat_popout_powered_by").html()||a("#arrowchat_popout_powered_by").not(':contains("ArrowChat")').html())return console.log("bfd"),a("body").each(function(){this.style.setProperty("display","none","important")}),!1}}()},arguments.callee.chatWith=function(a){x(a,uc_name[a],uc_status[a],uc_avatar[a],uc_link[a],"0")}}}(jqac),jqac,jqac(document).ready(function(){jqac.arrowchat(),jqac.arrowchat.runarrowchat()});